(function(t){function e(e){for(var a,o,r=e[0],c=e[1],l=e[2],d=0,p=[];d<r.length;d++)o=r[d],Object.prototype.hasOwnProperty.call(n,o)&&n[o]&&p.push(n[o][0]),n[o]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(t[a]=c[a]);u&&u(e);while(p.length)p.shift()();return i.push.apply(i,l||[]),s()}function s(){for(var t,e=0;e<i.length;e++){for(var s=i[e],a=!0,r=1;r<s.length;r++){var c=s[r];0!==n[c]&&(a=!1)}a&&(i.splice(e--,1),t=o(o.s=s[0]))}return t}var a={},n={app:0},i=[];function o(e){if(a[e])return a[e].exports;var s=a[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,o),s.l=!0,s.exports}o.m=t,o.c=a,o.d=function(t,e,s){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(o.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)o.d(s,a,function(e){return t[e]}.bind(null,a));return s},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=e,r=r.slice();for(var l=0;l<r.length;l++)e(r[l]);var u=c;i.push([0,"chunk-vendors"]),s()})({0:function(t,e,s){t.exports=s("56d7")},"0140":function(t,e,s){},"07a6":function(t,e,s){},"1abc5":function(t,e,s){"use strict";s("a634")},"1e07":function(t,e,s){"use strict";s("07a6")},2096:function(t,e,s){"use strict";s("c094")},2777:function(t,e,s){t.exports=s.p+"img/WorldLine.5c18468a.jpg"},"313c":function(t,e,s){},4166:function(t,e,s){},"4edd":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIEAAABhCAYAAADx5MLSAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAN/SURBVHhe7d2JctowFEbhvv+rts3WsBNc/wQNqkdpvMi6V+h8M5p2AqHj64MhDtAfHZpHBCACEAF6RAAiABGgRwQgAhABekQAIgARoEcEIAIQAXpEACIAEbhyuVy6/eHUHY7n21fKIAInTueP7ull2/182lzX8+vuGkUJROCAAvj1fA+gdAhEYGwYwDCGEiEQgaFUAPrarn9eUDIEIjDyVQDBMIS398PtkvyIwMB3AQSb7fGf66zFPAL9SKTDXdjYR1vakbGxAQyv9/pnf7skP7MI9Bj3yDs/rDiCuQHo7w/5nKCFALRCBEsCSF0vJ5MItvv7kx5tZOkzZKV5DkBMIoiPAgTwySoAMYkgbKjWI6shACGCldQSgBDBCmoKQIggs9oCECLIqMYAhAgyqTUAIYIMcgSgk0phlUYEC+UIQMLXtUojggV0Pj9HABIu0yqNCBaIf+e/JAAJl2uVVmUEp9O52+2PRZf+zSH9ejdsxzFx+dgAJFxHq7QqI0jtpLWXXvcwFG/H8CVgUwKQ+LZKqzIC3etSO2rNNTwS6Bdf8XZohRCmBiDx7ZTGc4KZ9Jq/eDvCUghTA5D4NkojgpniHf3VGhuAxN9XGhHMoB0bb0Nq6Unj2AAk/t7SiGCG+JVRYeler4cI/dg45/WA8W2VRgQznD8u3e+X7XW9bw7JHw+nspwJEThhORMicMJyJkTghOVMqozA4rTx2JU6vTzG0pksUWUEqeF7WnMsnckSVUZgcdp47OJIMJLlBntlORMicMJyJkTghOVMiMAJy5kQgROWMyECJyxnQgROWM6ECJywnEmVEXDaOK8qI0gN39OaY+lMlqgyAk4b58VzAicsZ0IETljOhAicsJwJEThhORMicMJyJkTghOVMiMAJy5kQgROWMzGJIH4z55of4V4LzaC5CF7e7h9wrff1tS7+2Bu9tb00kwiG/7+PQtD7+1qjI4A+ASU+Mmo2pZlEIPHRoMSaO9xhsGsui6OAmEWge4H3EEoHYPX8yCyCQINWDGM++SPHGhtCqQC086fGmZt5BGvTvUuDjgf/3dCHAVjeS0t4+AhkSgitBSBNRCBjQmgxAGkmAvlfCK0GIE1FIKkQhp9J2FIA0lwEkgqh1QCkyQgkFUKLAUizEYh2uB4K9FF0+rPFAKTpCPCJCEAEIAL0iABEACJAjwhABCACdF33F+CPDvPorF0RAAAAAElFTkSuQmCC"},"56d7":function(t,e,s){"use strict";s.r(e);s("e260"),s("e6cf"),s("cca6"),s("a79d");var a=s("2b0e"),n=(s("d3b7"),s("bc3a")),i=s.n(n);i.a.defaults.baseURL="/api",i.a.defaults.withCredentials=!0,i.a.defaults.headers.post["Content-Type"]="application/json;charset=UTF-8";var o={},r=i.a.create(o);r.interceptors.request.use((function(t){return localStorage.getItem("token")&&(t.headers["Authorization"]="Bearer ".concat(localStorage.getItem("token"))),t}),(function(t){return Promise.reject(t)})),r.interceptors.response.use((function(t){return t}),(function(t){return Promise.reject(t)})),Plugin.install=function(t,e){t.axios=r,window.axios=r,Object.defineProperties(t.prototype,{axios:{get:function(){return r}},$axios:{get:function(){return r}}})},a["default"].use(Plugin);Plugin;var c=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-app",{staticStyle:{overflow:"hidden!important"}},[s("v-overlay",{attrs:{value:t.overlay,"z-index":"500"}},[s("v-progress-circular",{attrs:{indeterminate:"",size:"64"}})],1),s("v-snackbar",{attrs:{timeout:2e3,color:t.snackbarType,top:""},model:{value:t.showSnackbar,callback:function(e){t.showSnackbar=e},expression:"showSnackbar"}},[t._v(" "+t._s(t.snackbarMessage)+" ")]),s("router-view")],1)},l=[],u={name:"App",data:function(){return{overlay:!1,showSnackbar:!1,snackbarMessage:"",snackbarType:""}},computed:{isDark:function(){return this.$vuetify.theme.dark},whiteOpacity:function(){return this.isDark?"rgba(255,255,255,0.1)":"rgba(255,255,255,0.3)"},backgroundStyle:function(){return this.isDark?"darkBg":"lightBg"}},methods:{message:function(t,e){this.showSnackbar=!0,this.snackbarMessage=t,this.snackbarType=e},updateToken:function(){var t=this;if(this.$store.state.token&&this.$store.state.expiredAt){var e=new Date(this.$store.state.expiredAt),s=new Date;s>=e&&this.$store.commit("logout")}setTimeout((function(){t.updateToken()}),6e4)}},mounted:function(){this.updateToken()}},d=u,p=s("2877"),m=s("6544"),h=s.n(m),v=s("7496"),f=s("a797"),g=s("490a"),_=s("2db4"),b=Object(p["a"])(d,c,l,!1,null,null,null),y=b.exports;h()(b,{VApp:v["a"],VOverlay:f["a"],VProgressCircular:g["a"],VSnackbar:_["a"]});var w=s("2f62");a["default"].use(w["a"]);var k=new w["a"].Store({state:{token:localStorage.getItem("token")||null,expiredAt:localStorage.getItem("expiredAt")||null,userDetails:JSON.parse(localStorage.getItem("userDetails"))||null,themeIsDark:"dark"===localStorage.getItem("theme"),userdata:localStorage.getItem("userdata")||null},mutations:{login:function(t,e){localStorage.setItem("token",e.Token),localStorage.setItem("expiredAt",e.ExpiredAt),t.token=e.Token,t.expiredAt=e.ExpiredAt},logout:function(t){localStorage.removeItem("token"),localStorage.removeItem("expiredAt"),localStorage.removeItem("userDetails"),t.token=null,t.expiredAt=null,t.userDetails=null},updateUserDetails:function(t,e){localStorage.setItem("userDetails",JSON.stringify(e)),t.userDetails=e},changeTheme:function(t,e){var s=e?"dark":"light";localStorage.removeItem("theme"),localStorage.setItem("theme",s),t.themeIsDark=e},setUserData:function(t,e){localStorage.setItem("userdata",e),t.userdata=e}},actions:{},modules:{},getters:{getUserData:function(t){return t.userdata}}}),x=s("8c4f"),C=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("v-app",{class:t.app.backgroundStyle},[s("HomeNavigation"),s("v-main",[s("v-app",{staticStyle:{"background-color":"rgba(0,0,0,0)"}},[s("v-navigation-drawer",{staticStyle:{"background-color":"rgba(0,0,0,0)",position:"absolute",height:"90%","z-index":"2"}},[s("q-a-robot")],1),s("v-container",[s("v-main",{staticClass:"mt-8"},[s("MindMap",{staticStyle:{width:"600px",height:"400px",margin:"0 auto",position:"relative"}})],1)],1)],1),s("HomeFooter")],1)],1)],1)},A=[],S=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"navigation"}},[a("v-app-bar",{attrs:{app:"",flat:"",color:"rgba(0,0,0,0)"}},[a("v-img",{staticClass:"d-none d-inline-flex",attrs:{src:s("cf05"),alt:"Logo","max-width":"250px"}}),a("v-spacer"),a("v-btn",{attrs:{text:""}},[a("v-icon",[t._v("mdi-home-outline")]),a("div",{staticClass:"d-none d-md-flex"},[t._v("主页")])],1),a("v-btn",{attrs:{text:""},on:{click:t.changeTheme}},[a("v-icon",[t._v("mdi-image-multiple")]),a("div",{staticClass:"d-none d-md-flex"},[t._v(t._s(t.app.isDark?"亮色":"暗色"))])],1),a("v-btn",{attrs:{text:""},on:{click:t.toLogin}},[a("v-icon",[t._v("mdi-login")]),a("div",{staticClass:"d-none d-md-flex"},[t._v("登录")])],1),a("v-btn",{attrs:{text:""},on:{click:t.toRegister}},[a("v-icon",[t._v("mdi-account-plus")]),a("div",{staticClass:"d-none d-md-flex"},[t._v("注册")])],1)],1)],1)},D=[],$=(s("ac1f"),s("5319"),{name:"HomeNavigation",data:function(){return{app:this.$root.$children[0]}},methods:{toHome:function(){"/"!==this.$route.path&&this.$router.push({path:"/"})},toLogin:function(){"login"!==this.$route.path&&this.$router.push({path:"/login"})},toRegister:function(){"/register"!==this.$route.path&&this.$router.push({path:"/register"})},changeTheme:function(){this.$vuetify.theme.dark=!this.$vuetify.theme.dark,this.$store.commit("changeTheme",this.$vuetify.theme.dark)},goTo:function(t){this.$router.replace(t)}}}),j=$,V=s("40dc"),q=s("8336"),I=s("132d"),T=s("adda"),P=s("2fa4"),O=Object(p["a"])(j,S,D,!1,null,"3e59d67c",null),M=O.exports;h()(O,{VAppBar:V["a"],VBtn:q["a"],VIcon:I["a"],VImg:T["a"],VSpacer:P["a"]});var L=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"footer"}},[s("v-footer",{attrs:{absolute:"",padless:"",color:"rgba(255,255,255,0)"}},[s("v-card",{staticClass:"text-center",attrs:{flat:"",width:"100%",color:t.app.whiteOpacity}},[s("v-card-text",[t._v(" Copyright © 2021 Advanced Web Q&A. All rights reserved. ")])],1)],1)],1)},H=[],Q={name:"HomeFooter",data:function(){return{app:this.$root.$children[0]}}},R=Q,E=s("b0af"),F=s("99d9"),N=s("553a"),z=Object(p["a"])(R,L,H,!1,null,"0a6134b2",null),U=z.exports;h()(z,{VCard:E["a"],VCardText:F["c"],VFooter:N["a"]});var B=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{ref:"tagCloud",staticClass:"tagCloud",staticStyle:{"text-align":"center",width:"700px",height:"500px",display:"flex"}},[t._l(t.tagList,(function(e,a){return s("a",{key:a,style:"color:"+e.color+";top: 0;left: 0;filter:none;",attrs:{href:e.url}},[t._v(" "+t._s(e.name)+" ")])})),s("v-btn",{staticClass:"input",attrs:{outlined:"",dense:"","append-icon":"mdi-magnify"},on:{click:function(e){return t.onUpdate()}}},[t._v(" 今 日 热 榜 ")])],2)},J=[],G=s("1da1"),W=(s("159b"),s("96cf"),{name:"MindMap",data:function(){return{tagList:[],radius:225,dtr:Math.PI/180,d:450,mcList:[],active:!1,lasta:0,lastb:1,distr:!0,tspeed:10,size:400,mouseX:0,mouseY:0,howElliptical:1,oList:null,oA:[],sa:0,ca:0,sb:0,cb:0,sc:0,cc:0,paper:null,input:"",interval:0}},beforeDestroy:function(){clearInterval(this.interval)},methods:{getRandomNum:function(){return Math.floor(156*Math.random()+50)},sineCosine:function(t,e,s){this.sa=Math.sin(t*this.dtr),this.ca=Math.cos(t*this.dtr),this.sb=Math.sin(e*this.dtr),this.cb=Math.cos(e*this.dtr),this.sc=Math.sin(s*this.dtr),this.cc=Math.cos(s*this.dtr)},positionAll:function(){var t=this;this.$nextTick((function(){for(var e=0,s=0,a=t.mcList.length,n=[],i=document.createDocumentFragment(),o=0;o<t.oA.length;o++)n.push(t.oA[o]);n.sort((function(){return Math.random()<.5?1:-1}));for(var r=0;r<n.length;r++)i.appendChild(n[r]);t.oList.appendChild(i);for(var c=1;c<a+1;c++)t.distr?(e=Math.acos((2*c-1)/a-1),s=Math.sqrt(a*Math.PI)*e):(e=Math.random()*Math.PI,s=Math.random()*(2*Math.PI)),t.mcList[c-1].cx=t.radius*Math.cos(s)*Math.sin(e),t.mcList[c-1].cy=t.radius*Math.sin(s)*Math.sin(e),t.mcList[c-1].cz=t.radius*Math.cos(e),t.oA[c-1].style.left=t.mcList[c-1].cx+t.oList.offsetWidth/2-t.mcList[c-1].offsetWidth/2+"px",t.oA[c-1].style.top=t.mcList[c-1].cy+t.oList.offsetHeight/2-t.mcList[c-1].offsetHeight/2+"px"}))},update:function(){var t=this;this.$nextTick((function(){var e,s;if(t.active?(e=-Math.min(Math.max(-t.mouseY,-t.size),t.size)/t.radius*t.tspeed,s=Math.min(Math.max(-t.mouseX,-t.size),t.size)/t.radius*t.tspeed):(e=.98*t.lasta,s=.98*t.lastb),t.lasta=e,t.lastb=s,!(Math.abs(e)<=.01&&Math.abs(s)<=.01)){var a=0;t.sineCosine(e,s,a);for(var n=0;n<t.mcList.length;n++){var i=t.mcList[n].cx,o=t.mcList[n].cy*t.ca+t.mcList[n].cz*-t.sa,r=t.mcList[n].cy*t.sa+t.mcList[n].cz*t.ca,c=i*t.cb+r*t.sb,l=o,u=i*-t.sb+r*t.cb,d=c*t.cc+l*-t.sc,p=c*t.sc+l*t.cc,m=u;t.mcList[n].cx=d,t.mcList[n].cy=p,t.mcList[n].cz=m;var h=t.d/(t.d+m);t.mcList[n].x=t.howElliptical*d*h-2*t.howElliptical,t.mcList[n].y=p*h,t.mcList[n].scale=h,t.mcList[n].alpha=h,t.mcList[n].alpha=(t.mcList[n].alpha-.6)*(10/6)}t.doPosition(),t.depthSort()}}))},doPosition:function(){var t=this;this.$nextTick((function(){for(var e=t.oList.offsetWidth/2,s=t.oList.offsetHeight/2,a=0;a<t.mcList.length;a++)t.oA[a].style.left=t.mcList[a].cx+e-t.mcList[a].offsetWidth/2+"px",t.oA[a].style.top=t.mcList[a].cy+s-t.mcList[a].offsetHeight/2+"px",t.oA[a].style.fontSize=Math.ceil(12*t.mcList[a].scale/2)+8+"px",t.oA[a].style.opacity=.5*t.mcList[a].alpha+.5}))},depthSort:function(){var t=this;this.$nextTick((function(){for(var e=[],s=0;s<t.oA.length;s++)e.push(t.oA[s]);e.sort((function(t,e){return t.cz>e.cz?-1:t.cz<e.cz?1:0}));for(var a=0;a<e.length;a++)e[a].style.zIndex=a}))},query:function(){var t=this;return Object(G["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.getData();case 2:return e.next=4,t.onReady();case 4:case"end":return e.stop()}}),e)})))()},onReady:function(){var t=this;return Object(G["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.$nextTick((function(){t.oList=t.$refs.tagCloud,t.paper=document.querySelector(".tagCloud"),t.oA=document.getElementsByTagName("a");var e=null;t.mcList=[];for(var s=0;s<t.oA.length;s++)e={},e.offsetWidth=t.oA[s].offsetWidth,e.offsetHeight=t.oA[s].offsetHeight,t.mcList.push(e);t.sineCosine(0,0,0),t.positionAll(),t.paper.onmouseover=function(){t.active=!0},t.paper.onmouseout=function(){t.active=!1},t.paper.onmousemove=function(e){var s=window.event||e;t.mouseX=s.clientX-(t.oList.offsetLeft+t.oList.offsetWidth/2),t.mouseY=s.clientY-(t.oList.offsetTop+t.oList.offsetHeight/2),t.mouseX/=30,t.mouseY/=30},t.interval=setInterval((function(){t.update()}),10)}));case 1:case"end":return e.stop()}}),e)})))()},doNext:function(){var t=this;return Object(G["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.$nextTick((function(){var e=[],s=t.$store.getters.getUserData;s.forEach((function(s,a){null!==t.$store.state.token?e.push({name:s.title,url:"/userHome/questionDetails/"+s.ID,color:"rgb("+t.getRandomNum()+","+t.getRandomNum()+","+t.getRandomNum()+")"}):e.push({name:s.title,url:"/",color:"rgb("+t.getRandomNum()+","+t.getRandomNum()+","+t.getRandomNum()+")"})})),t.tagList=e}));case 1:case"end":return e.stop()}}),e)})))()},getData:function(){var t=this;return Object(G["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$axios.get("/userServer/hot-list",{limit:20}).then(function(){var e=Object(G["a"])(regeneratorRuntime.mark((function e(s){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(200!==s.status){e.next=4;break}return t.$store.commit("setUserData",s.data.data),e.next=4,t.doNext();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e)})))()},onUpdate:function(){"/userHome/hotQuestions"!==this.$route.path&&this.$router.push({path:"/userHome/hotQuestions"}).catch((function(t){return t}))}},created:function(){var t=this;this.$nextTick((function(){t.query()}))}}),Y=W,X=(s("2096"),Object(p["a"])(Y,B,J,!1,null,"fc849566",null)),Z=X.exports;h()(X,{VBtn:q["a"]});var K=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-container",[s("div",{ref:"list",staticClass:"list",attrs:{id:"list"}},[s("ul",t._l(t.msglist,(function(e,a){return s("li",{key:a},[e.me?s("user",{attrs:{id:e.id,type:e.type,content:e.content}}):s("div",[s("robot",{attrs:{id:e.id,type:e.type,content:e.content}}),null!==t.$store.state.token?s("v-btn",{attrs:{text:"",color:"blue","x-small":""},on:{click:function(e){t.showSuggestionDialog=!0}}},[t._v(" 提供改进建议 > ")]):s("v-btn",{attrs:{text:"",color:"blue","x-small":"",disabled:""},on:{click:function(e){t.showSuggestionDialog=!0}}},[t._v("登录后可提出建议 >")])],1)],1)})),0)]),s("div",[s("div",{staticClass:"line"}),s("div",{staticClass:"input-send"},[s("v-text-field",{staticClass:"input",attrs:{placeholder:"请输入聊天内容..."},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.send(e)}},model:{value:t.text,callback:function(e){t.text=e},expression:"text"}}),s("v-btn",{staticClass:"send",attrs:{plain:"",type:"info"},on:{click:t.send}},[t._v("发送")])],1)]),s("v-dialog",{attrs:{persistent:"","max-width":"800px"},model:{value:t.showSuggestionDialog,callback:function(e){t.showSuggestionDialog=e},expression:"showSuggestionDialog"}},[[s("v-card",[s("v-toolbar",{attrs:{color:"primary",dark:""}},[t._v("留下您的建议 ")]),s("v-card-text",{staticClass:"mt-5"},[s("v-textarea",{ref:"input",attrs:{placeholder:"你的建议..."},model:{value:t.suggestion,callback:function(e){t.suggestion=e},expression:"suggestion"}})],1),s("v-card-actions",{staticClass:"justify-end"},[s("v-btn",{staticClass:"mb-4 mr-4",attrs:{elevation:"2",color:"primary",depressed:""},on:{click:t.submitSuggestion}},[t._v("提交建议")]),s("v-btn",{staticClass:"mb-4 mr-4",attrs:{elevation:"2",color:"primary",depressed:""},on:{click:t.cancelAnswerDialog}},[t._v("取消")])],1)],1)]],2)],1)},tt=[],et=s("b85c"),st=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container"},[s("img",{staticClass:"head",attrs:{src:"https://img.zcool.cn/community/01b0645a112c1ea80121985c0ea3d0.jpg@1280w_1l_2o_100sh.jpg",alt:"user"}}),s("div",{staticClass:"content"},[s("div",{staticClass:"text",staticStyle:{"word-break":"break-all"}},[t._v(" "+t._s(t.content)+" ")])])])},at=[],nt={name:"User",props:["id","content"]},it=nt,ot=(s("9911a"),Object(p["a"])(it,st,at,!1,null,"5e45465d",null)),rt=ot.exports,ct=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container"},[s("img",{staticClass:"head",attrs:{src:"https://pp.myapp.com/ma_icon/0/icon_42284557_1517984341/96",alt:"启航"}}),s("div",{staticClass:"content"},[s("div",{staticClass:"text",attrs:{id:"text"+t.id}})])])},lt=[],ut=s("886e"),dt=s.n(ut),pt={name:"Robot",props:["id","content"],methods:{preview:function(t){dt()([t])},renderSuggestion:function(){console.log("render robot")}},mounted:function(){console.log(this.id),document.getElementById("text"+this.id).innerHTML=this.content}},mt=pt,ht=(s("bb76"),Object(p["a"])(mt,ct,lt,!1,null,"3bcd825c",null)),vt=ht.exports;a["default"].directive("scroll",{inserted:function(t){t.scrollIntoView()}});var ft={name:"QARobot",components:{Robot:vt,User:rt},data:function(){return{app:this.$root.$children[0],text:"",msglist:[{id:1,type:1,content:"欢迎你！",me:!1}],timer:0,showSuggestionDialog:!1,suggestion:""}},methods:{scroll:function(){var t=document.getElementById("container");t.scrollTop=t.scrollHeight,console.log(t.scrollHeight,t.scrollTop)},send:function(){this.text&&(this.msglist.push({id:this.msglist[this.msglist.length-1].id+1,type:1,content:this.text,me:!0}),this.getResponse(this.text),this.text="")},renderSuggestion:function(){console.log("render QAR")},submitSuggestion:function(){var t=this;console.log(this.judgeAnswerCanPost()),this.judgeAnswerCanPost()&&this.$axios.post("/userServer/suggestions",{content:this.suggestion}).then((function(e){console.log(e),200===e.status&&200===e.data.code&&0!==e.data.data.object_id.length?(t.app.message("建议提交成功","green"),t.showSuggestionDialog=!1,t.suggestion=""):t.app.message("服务器开小差了","red")}))},cancelAnswerDialog:function(){this.suggestion="",this.showSuggestionDialog=!1},judgeAnswerCanPost:function(){return console.log(this.suggestion),0!==this.suggestion.length||(this.app.message("建议不能为空","red"),!1)},getResponse:function(t){var e=this;this.$axios.get("/userServer/question-answer/"+t,{params:{question:t,limit:3}}).then((function(t){if(console.log(t),200===t.data.code)if(null===t.data.data)e.msglist.push({id:e.msglist[e.msglist.length-1].id+1,type:1,content:"对不起，我冯启航也无能为力……",me:!1});else{var s,a="",n=Object(et["a"])(t.data.data);try{for(n.s();!(s=n.n()).done;){var i=s.value;a+=i.subject+" "+i.predicate+" "+i.objects[0]+";"}}catch(o){n.e(o)}finally{n.f()}e.msglist.push({id:e.msglist[e.msglist.length-1].id+1,type:1,content:a,me:!1})}}))}}},gt=ft,_t=(s("1abc5"),s("a523")),bt=s("169a"),yt=s("8654"),wt=s("a844"),kt=s("71d9"),xt=Object(p["a"])(gt,K,tt,!1,null,"206f55bf",null),Ct=xt.exports;h()(xt,{VBtn:q["a"],VCard:E["a"],VCardActions:F["a"],VCardText:F["c"],VContainer:_t["a"],VDialog:bt["a"],VTextField:yt["a"],VTextarea:wt["a"],VToolbar:kt["a"]});var At={name:"Home",components:{QARobot:Ct,HomeNavigation:M,HomeFooter:U,MindMap:Z},data:function(){return{app:this.$root.$children[0],counter:0}}},St=At,Dt=(s("cccb"),s("f6c4")),$t=s("f774"),jt=Object(p["a"])(St,C,A,!1,null,null,null),Vt=jt.exports;h()(jt,{VApp:v["a"],VContainer:_t["a"],VMain:Dt["a"],VNavigationDrawer:$t["a"]});var qt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-app",{class:t.app.backgroundStyle,attrs:{id:"login"}},[s("v-main",[s("v-container",{attrs:{fluid:""}},[s("v-row",{attrs:{align:"center",justify:"center"}},[s("v-col",{attrs:{cols:"12",sm:"8",md:"5"}},[s("v-card",{attrs:{shaped:"",color:t.app.whiteOpacity,id:"loginBase"}},[s("v-card-text",[s("v-toolbar",{attrs:{flat:"",color:"rgba(255,255,255,0)"}},[s("v-toolbar-title",{staticClass:"display-1"},[t._v("登录")]),s("v-spacer"),s("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on;return[s("v-btn",t._g({attrs:{icon:"",large:""},on:{click:t.toHome}},a),[s("v-icon",[t._v("mdi-home-outline")])],1)]}}])},[s("span",[t._v("主页")])]),s("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on;return[s("v-btn",t._g({attrs:{icon:"",large:""},on:{click:t.changeTheme}},a),[s("v-icon",[t._v("mdi-image-multiple")])],1)]}}])},[s("span",[t._v("换肤")])])],1),s("v-form",{ref:"form",staticClass:"ma-7 mb-n5"},[s("v-text-field",{ref:"username",attrs:{label:"username","append-icon":"mdi-account",outlined:"",rules:t.usernameRules},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}}),s("v-text-field",{ref:"password",attrs:{label:"password","append-icon":"mdi-fingerprint",outlined:"",type:"password",rules:t.passwordRules},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.login(e)}},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1)],1),s("v-card-actions",{staticClass:"mr-7"},[s("v-spacer"),s("v-btn",{staticClass:"title",attrs:{color:"primary",text:""},on:{click:t.resetForm}},[t._v("重置")]),s("v-btn",{staticClass:"title",attrs:{color:"primary",text:""},on:{click:t.login}},[t._v("确认")])],1)],1)],1)],1)],1)],1)],1)},It=[],Tt=(s("b64b"),{name:"Login",data:function(){return{username:"",usernameRules:[function(t){return!!t||"用户名不为空"}],password:"",passwordRules:[function(t){return!!t||"密码不为空"}],formHasErrors:!1,app:this.$root.$children[0]}},components:{},computed:{form:function(){return{username:this.username,password:this.password}}},methods:{toHome:function(){this.$router.push({path:"/"})},changeTheme:function(){this.$vuetify.theme.dark=!this.$vuetify.theme.dark,this.$store.commit("changeTheme",this.$vuetify.theme.dark)},resetForm:function(){var t=this;this.formHasErrors=!1,Object.keys(this.form).forEach((function(e){t.$refs[e].reset()}))},checkForm:function(){var t=this;this.formHasErrors=!1,Object.keys(this.form).forEach((function(e){t.$refs[e].validate(!0),t.$refs[e].valid||(t.formHasErrors=!0)}))},login:function(){var t=this;!0!==this.app.overlay&&(this.checkForm(),this.formHasErrors||(this.app.overlay=!0,this.$axios.post("/userServer/users/login",{password:this.password,username:this.username}).then((function(e){if(200===e.status){var s=e.data.code;200===s?(t.$store.commit("login",e.data.data),t.$axios.get("/userServer/users/curr",{params:{}}).then((function(e){if(200===e.status){var s=e.data.code;200===s&&(t.$store.commit("updateUserDetails",e.data.data),t.$route.query.redirect?t.$router.replace({path:t.$route.query.redirect}).catch((function(){t.app.message("跳转失败","warning")})):t.$router.replace({path:"/userHome"}),t.app.message("登录成功","success"))}})).catch((function(){t.app.message("获取用户信息失败","red")}))):204===s||404===s?t.app.message("用户名或密码错误","warning"):t.app.message("服务器错误","red")}})).catch((function(){t.app.message("登录失败","red")})),this.app.overlay=!1))}},beforeRouteEnter:function(t,e,s){s((function(t){t.$store.state.token&&t.$router.push("/userHome")}))}}),Pt=Tt,Ot=(s("5b9c"),s("62ad")),Mt=s("4bd4"),Lt=s("0fd9"),Ht=s("2a7f"),Qt=s("3a2f"),Rt=Object(p["a"])(Pt,qt,It,!1,null,"1791672e",null),Et=Rt.exports;h()(Rt,{VApp:v["a"],VBtn:q["a"],VCard:E["a"],VCardActions:F["a"],VCardText:F["c"],VCol:Ot["a"],VContainer:_t["a"],VForm:Mt["a"],VIcon:I["a"],VMain:Dt["a"],VRow:Lt["a"],VSpacer:P["a"],VTextField:yt["a"],VToolbar:kt["a"],VToolbarTitle:Ht["a"],VTooltip:Qt["a"]});var Ft=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-app",{class:t.app.backgroundStyle,attrs:{id:"register"}},[s("v-main",[s("v-container",{attrs:{fluid:""}},[s("v-row",{attrs:{align:"center",justify:"center"}},[s("v-col",{attrs:{cols:"12",sm:"8",md:"5"}},[s("v-card",{attrs:{shaped:"",color:t.app.whiteOpacity,id:"registerBase"}},[s("v-card-text",[s("v-toolbar",{attrs:{flat:"",color:"rgba(255,255,255,0)"}},[s("v-toolbar-title",{staticClass:"display-1"},[t._v("注册")]),s("v-spacer"),s("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on;return[s("v-btn",t._g({attrs:{icon:"",large:""},on:{click:t.toHome}},a),[s("v-icon",[t._v("mdi-home-outline")])],1)]}}])},[s("span",[t._v("主页")])]),s("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on;return[s("v-btn",t._g({attrs:{icon:"",large:""},on:{click:t.changeTheme}},a),[s("v-icon",[t._v("mdi-image-multiple")])],1)]}}])},[s("span",[t._v("换肤")])])],1),s("v-form",{ref:"form",staticClass:"ma-7 mb-n5"},[s("v-text-field",{ref:"username",attrs:{label:"用户名","append-icon":"mdi-account",outlined:"",dense:"",rules:t.usernameRules},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}}),s("v-text-field",{ref:"nickname",attrs:{label:"昵称","append-icon":"mdi-qqchat",outlined:"",dense:"",rules:t.nicknameRules},model:{value:t.nickname,callback:function(e){t.nickname=e},expression:"nickname"}}),s("v-text-field",{ref:"password",attrs:{label:"密码","append-icon":"mdi-fingerprint",outlined:"",dense:"",type:"password",rules:t.passwordRules},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),s("v-text-field",{ref:"ensurePassword",attrs:{label:"确认密码","append-icon":"mdi-fingerprint",outlined:"",dense:"",type:"password",rules:t.ensurePasswordRules},model:{value:t.ensurePassword,callback:function(e){t.ensurePassword=e},expression:"ensurePassword"}}),s("v-radio-group",{attrs:{row:"",mandatory:""},model:{value:t.gender,callback:function(e){t.gender=e},expression:"gender"}},[s("v-radio",{attrs:{label:"男",value:"1"}}),s("v-radio",{attrs:{label:"女",value:"2"}})],1),s("v-text-field",{ref:"email",attrs:{label:"邮箱","append-icon":"mdi-email",outlined:"",dense:"",rules:t.emailRules},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}}),s("v-distpicker",{staticClass:"mb-4",attrs:{province:t.province,city:t.city,area:t.area},on:{province:t.getProvince,city:t.getCity,area:t.getArea}}),s("v-text-field",{ref:"address",attrs:{label:"地址","append-icon":"mdi-map-marker",outlined:"",dense:"",disabled:"",rules:t.addressRules},model:{value:t.address,callback:function(e){t.address=e},expression:"address"}})],1)],1),s("v-card-actions",{staticClass:"mr-7"},[s("v-spacer"),s("v-btn",{staticClass:"title",attrs:{color:"primary",text:""},on:{click:t.resetForm}},[t._v("重置")]),s("v-btn",{staticClass:"title",attrs:{color:"primary",text:""},on:{click:t.register}},[t._v("确认")])],1)],1)],1)],1)],1)],1)],1)},Nt=[],zt=s("784f"),Ut=s.n(zt),Bt={name:"Register",data:function(){return{app:this.$root.$children[0],formHasErrors:!1,username:"",usernameRules:[function(t){return!!t||"用户名不能为空"},function(t){return t.length>=4&&t.length<=8||"用户长度需大于4，小于8"},function(t){return/^[A-Za-z0-9]{4,8}$/.test(t)||"用户名只能由数字和字母组成"}],nickname:"",nicknameRules:[function(t){return!!t||"昵称不能为空"}],password:"",passwordRules:[function(t){return!!t||"密码不能为空"},function(t){return t.length>=6&&t.length<=10||"密码长度需大于6，小于10"},function(t){return/^[A-Za-z0-9]{6,10}$/.test(t)||"密码只能由数字和字母组成"}],ensurePassword:"",ensurePasswordRules:[this.checkEnsurePassword],gender:1,email:"",emailRules:[function(t){return!!t||"邮箱不能为空"},function(t){return/.+@.+\..+/.test(t)||"邮箱格式错误"}],address:"",addressRules:[this.checkAddress],province:"",city:"",area:""}},components:{VDistpicker:Ut.a},computed:{form:function(){return{username:this.username,nickname:this.nickname,password:this.password,ensurePassword:this.ensurePassword,email:this.email,address:this.address}}},methods:{checkEnsurePassword:function(){return this.ensurePassword===this.password||"密码确认错误"},checkAddress:function(){return"省"!==this.province&&""!==this.province&&"市"!==this.city&&""!==this.city&&"区"!==this.area&&""!==this.area||"地址未选全"},updateAddress:function(){"省"===this.province||""===this.province?this.address="":"市"===this.city||""===this.city?this.address=this.province+" ":"区"===this.area||""===this.area?this.address=this.province+" "+this.city+" ":this.address=this.province+" "+this.city+" "+this.area},getProvince:function(t){this.province=t.value,this.updateAddress()},getCity:function(t){this.city=t.value,this.updateAddress()},getArea:function(t){this.area=t.value,this.updateAddress()},toHome:function(){this.$router.push({path:"/"})},changeTheme:function(){this.$vuetify.theme.dark=!this.$vuetify.theme.dark,this.$store.commit("changeTheme",this.$vuetify.theme.dark)},resetForm:function(){var t=this;this.formHasErrors=!1,Object.keys(this.form).forEach((function(e){t.$refs[e].reset()})),this.gender=1,this.province="",this.city="",this.area=""},checkForm:function(){var t=this;this.formHasErrors=!1,Object.keys(this.form).forEach((function(e){t.$refs[e].validate(!0),t.$refs[e].valid||(t.formHasErrors=!0)}))},register:function(){var t=this;!0!==this.app.overlay&&(this.checkForm(),this.formHasErrors||(this.app.overlay=!0,this.$axios.post("/userServer/users/register",{address:this.address,email:this.email,gender:parseInt(this.gender),nickname:this.nickname,password:this.password,username:this.username}).then((function(e){if(200===e.status){var s=e.data.code;200===s?(t.app.message("注册成功","success"),t.$router.push({path:"/"})):409===s?t.app.message("用户名已存在","warning"):t.app.message("服务器错误","warning")}})).catch((function(){t.app.message("注册失败","red")})),this.app.overlay=!1))}}},Jt=Bt,Gt=(s("fb89"),s("67b6")),Wt=s("43a6"),Yt=Object(p["a"])(Jt,Ft,Nt,!1,null,"d91123e2",null),Xt=Yt.exports;h()(Yt,{VApp:v["a"],VBtn:q["a"],VCard:E["a"],VCardActions:F["a"],VCardText:F["c"],VCol:Ot["a"],VContainer:_t["a"],VForm:Mt["a"],VIcon:I["a"],VMain:Dt["a"],VRadio:Gt["a"],VRadioGroup:Wt["a"],VRow:Lt["a"],VSpacer:P["a"],VTextField:yt["a"],VToolbar:kt["a"],VToolbarTitle:Ht["a"],VTooltip:Qt["a"]});var Zt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-app",{class:t.app.backgroundStyle,attrs:{id:"UserHome"}},[s("UserHomeNavigation"),s("v-main",{staticClass:"temp"},[s("router-view")],1)],1)},Kt=[],te=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app-bar",{staticClass:"justify-center pt-2",staticStyle:{"z-index":"200"},attrs:{absolute:"",app:"",flat:"",prominent:"",color:"rgb(255,255,255,0.2)",height:"60"}},[a("v-row",[a("v-col",{attrs:{cols:"2"}},[a("v-img",{staticClass:"d-none d-inline-flex mt-1",attrs:{"max-width":"250px",alt:"Logo",src:s("cf05")}})],1),t.isAdmin?t._e():a("v-col",{attrs:{cols:"4"}},[a("v-row",[a("v-spacer"),a("v-col",{attrs:{cols:"11"}},[a("v-text-field",{attrs:{label:"搜索",dense:"",outlined:"","append-outer-icon":"mdi-send"},on:{"click:append-outer":t.toSearchedQuestions},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1)],1)],1),t.isAdmin?t._e():a("v-col",{attrs:{cols:"6"}},[a("v-row",[a("v-spacer"),a("v-col",{staticClass:"d-sm-flex d-md-flex d-lg-flex d-xl-flex",attrs:{cols:"12",sm:"12",md:"12",lg:"10",xl:"9"}},t._l(t.menu,(function(e,s){return a("v-btn",{key:s,attrs:{text:""},on:{click:e.func}},[a("v-icon",[t._v(t._s(e.icon))]),a("div",{staticClass:"d-none d-md-flex"},[t._v(t._s(e.title))])],1)})),1)],1)],1),a("v-spacer"),t.isAdmin?a("v-col",{attrs:{cols:"4"}},[a("v-row",[a("v-spacer"),a("v-col",{staticClass:"d-sm-flex d-md-flex d-lg-flex d-xl-flex",attrs:{cols:"12",sm:"12",md:"12",lg:"10",xl:"9"}},t._l(t.adminMenu,(function(e,s){return a("v-btn",{key:s,attrs:{text:""},on:{click:e.func}},[a("v-icon",[t._v(t._s(e.icon))]),a("div",{staticClass:"d-none d-md-flex"},[t._v(t._s(e.title))])],1)})),1)],1)],1):t._e()],1),a("v-dialog",{attrs:{persistent:"","max-width":"800px"},model:{value:t.isQuestionDialogOn,callback:function(e){t.isQuestionDialogOn=e},expression:"isQuestionDialogOn"}},[[a("v-card",[a("v-toolbar",{attrs:{color:"primary",dark:""}},[t._v("提问 ")]),a("v-card-text",{staticClass:"mt-5"},[a("v-text-field",{attrs:{placeholder:"",label:"问题标题",outlined:"",dense:""},model:{value:t.questionTitle,callback:function(e){t.questionTitle=e},expression:"questionTitle"}}),a("MarkdownInput",{ref:"markdownInput",staticStyle:{"margin-top":"-30px"},attrs:{placeholder:"问题描述...."},on:{transformHtml:t.receiveHtml}})],1),a("v-card-actions",{staticClass:"justify-end"},[a("v-btn",{staticClass:"mb-4 mr-4",attrs:{elevation:"2",color:"primary",depressed:""},on:{click:t.submitQuestion}},[t._v("提交")]),a("v-btn",{staticClass:"mb-4 mr-4",attrs:{elevation:"2",color:"primary",depressed:""},on:{click:t.closeQuestionDialog}},[t._v("取消 ")])],1)],1)]],2)],1)},ee=[],se=(s("841c"),function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("mavon-editor",{ref:"md",staticStyle:{"min-height":"300px",margin:"50px","max-height":"300px"},attrs:{placeholder:t.placeholder},on:{change:t.change},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}})],1)}),ae=[],ne=s("b2d8"),ie=(s("64e1"),{name:"MarkdownInput",components:{mavonEditor:ne["mavonEditor"]},data:function(){return{app:this.$root.$children[0],content:"",html:""}},methods:{change:function(t,e){this.html=e,this.$emit("transformHtml",this.html)},initHtml:function(){console.log(123)}},props:["placeholder"]}),oe=ie,re=Object(p["a"])(oe,se,ae,!1,null,"464eb5cd",null),ce=re.exports,le={name:"UserHomeNavigation",components:{MarkdownInput:ce},data:function(){return{app:this.$root.$children[0],questionTitle:"",questionDescription:"",isQuestionDialogOn:!1,search:"",menu:[{title:"首页",icon:"mdi-home-outline",func:this.toUserHome},{title:"去提问",icon:"mdi-frequently-asked-questions",func:this.openQuestionDialog},{title:"热榜",icon:"mdi-trophy",func:this.toHotQuestions},{title:"换肤",icon:"mdi-image-multiple",func:this.changeTheme},{title:"用户",icon:"mdi-account",func:this.toUserInfo},{title:"登出",icon:"mdi-logout",func:this.logout}],adminMenu:[{title:"首页",icon:"mdi-home-outline",func:this.toUserHome},{title:"换肤",icon:"mdi-image-multiple",func:this.changeTheme},{title:"建议",icon:"mdi-comment-plus",func:this.toSuggestionsView},{title:"登出",icon:"mdi-logout",func:this.logout}]}},computed:{isAdmin:function(){return 1===this.$store.state.userDetails.ID}},methods:{changeTheme:function(){this.$vuetify.theme.dark=!this.$vuetify.theme.dark,this.$store.commit("changeTheme",this.$vuetify.theme.dark)},toSearchedQuestions:function(){console.log("temp"),""!==this.search&&(this.$router.replace({path:"/userHome/searchedQuestions/"+this.search}).catch((function(t){return t})),this.$router.go(0))},toUserHome:function(){"/userHome/"!==this.$route.path&&this.$router.push({path:"/userHome"}).catch((function(t){return t}))},toUserInfo:function(){"/userInfo/"!==this.$route.path&&this.$router.push({path:"/userHome/userInfo"}).catch((function(t){return t}))},openQuestionDialog:function(){this.isQuestionDialogOn=!0},closeQuestionDialog:function(){this.isQuestionDialogOn=!1},receiveHtml:function(t){this.questionDescription=t},judgeQuestionCanPost:function(){return""===this.questionTitle?(this.app.message("问题标题不能为空","warning"),!1):""!==this.questionDescription||(this.app.message("问题描述不能为空","warning"),!1)},submitQuestion:function(){var t=this;if(!0!==this.app.overlay){var e=this.judgeQuestionCanPost();e&&(this.app.overlay=!0,this.$axios.post("/userServer/questions",{content:this.questionDescription,title:this.questionTitle}).then((function(e){if(200===e.status){var s=e.data.code;200===s?(t.app.message("问题提交成功","success"),t.questionTitle="",t.questionDescription="",t.$refs.markdownInput.content="",t.closeQuestionDialog()):t.app.message("问题上传失败","warning")}})).catch((function(){t.app.message("服务器正忙","red")})),this.app.overlay=!1)}},toSuggestionsView:function(){"/userHome/suggestionsView"!==this.$route.path&&this.$router.push({path:"/userHome/suggestionsView"}).catch((function(t){return t}))},toFollowingQuestions:function(){"/userHome/followingQuestions"!==this.$route.path&&this.$router.push({path:"/userHome/followingQuestions"}).catch((function(t){return t}))},toHotQuestions:function(){"/userHome/hotQuestions"!==this.$route.path&&this.$router.push({path:"/userHome/hotQuestions"}).catch((function(t){return t}))},logout:function(){this.$store.state.token&&this.$store.commit("logout"),this.$router.push("/")}}},ue=le,de=Object(p["a"])(ue,te,ee,!1,null,"01239628",null),pe=de.exports;h()(de,{VAppBar:V["a"],VBtn:q["a"],VCard:E["a"],VCardActions:F["a"],VCardText:F["c"],VCol:Ot["a"],VDialog:bt["a"],VIcon:I["a"],VImg:T["a"],VRow:Lt["a"],VSpacer:P["a"],VTextField:yt["a"],VToolbar:kt["a"]});var me={name:"UserHome",data:function(){return{app:this.$root.$children[0]}},components:{UserHomeNavigation:pe},methods:{}},he=me,ve=(s("1e07"),Object(p["a"])(he,Zt,Kt,!1,null,"77b2e223",null)),fe=ve.exports;h()(ve,{VApp:v["a"],VMain:Dt["a"]});var ge=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",{attrs:{id:"error"}},[a("v-card",{attrs:{width:"100%",height:"100%",color:"black"}},[a("v-container",[a("v-row",{staticClass:"mt-12",attrs:{justify:"center"}},[a("v-card-title",{staticClass:"display-3 font-weight-bold white--text text-no-wrap"},[t._v(t._s(t.errorMessage))])],1),a("v-row",{attrs:{justify:"center"}},[a("v-card-subtitle",{staticClass:"title white--text"},[t._v("This page has jumped to another world line")])],1),a("v-row",{attrs:{justify:"center"}},[a("v-img",{attrs:{src:s("2777")}})],1)],1)],1)],1)},_e=[],be={400:"400 Bad Request",401:"401 Unauthorized",402:"402 Payment Required",403:"403 Forbidden",404:"404 Not Found",405:"405 Method Not Allowed",406:"406 Not Acceptable",407:"407 Proxy Authentication Required",408:"408 Request Time-out",409:"409 Conflict",410:"410 Gone",411:"411 Length Required",412:"412 Precondition Failed",413:"413 Request Entity Too Large",414:"414 Request-URI Too Large",415:"415 Unsupported Media Type",416:"416 Requested range not satisfiable",417:"417 Expectation Failed"},ye=be,we={name:"Error",data:function(){return{}},computed:{errorMessage:function(){return/^\/error\/((40[0-9])|(41[0-7]))$/.test(this.$route.path)?ye[this.$route.params.id]:ye[404]}}},ke=we,xe=Object(p["a"])(ke,ge,_e,!1,null,null,null),Ce=xe.exports;h()(xe,{VApp:v["a"],VCard:E["a"],VCardSubtitle:F["b"],VCardTitle:F["d"],VContainer:_t["a"],VImg:T["a"],VRow:Lt["a"]});var Ae=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",{staticStyle:{"background-color":"rgba(0,0,0,0)"}},[a("v-navigation-drawer",{staticStyle:{"background-color":"rgba(0,0,0,0)",position:"absolute",height:"90%"}},[a("q-a-robot")],1),a("v-container",[a("mind-map",{staticStyle:{width:"700px",height:"400px",margin:"50px auto 50px",display:"flex"}}),a("v-row",{attrs:{justify:"center"}},[a("h3",{staticStyle:{"letter-spacing":"1px"}},[t._v("您好, 亲爱的 "+t._s(t.username)),a("br")])]),a("v-row",{staticClass:"mt-12",attrs:{justify:"center"}},[a("v-img",{attrs:{src:s("cf05"),"max-width":"50%"}})],1)],1)],1)},Se=[],De={name:"UserHomeWelcome",components:{QARobot:Ct,MindMap:Z},data:function(){return{app:this.$root.$children[0]}},computed:{isAdmin:function(){return 1===this.$store.state.userDetails.ID},username:function(){return this.$store.state.userDetails?this.$store.state.userDetails.nickname:"xxx"}}},$e=De,je=Object(p["a"])($e,Ae,Se,!1,null,"40910d14",null),Ve=je.exports;h()(je,{VApp:v["a"],VContainer:_t["a"],VImg:T["a"],VNavigationDrawer:$t["a"],VRow:Lt["a"]});var qe=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("v-card",{staticStyle:{margin:"5vh",padding:"5vh"},attrs:{elevation:"2"}},[s("div",{staticStyle:{"text-align":"center"}},[s("h3",[t._v("用户 "+t._s(this.user.username)+" 信息")])]),s("br"),t._v(" 用户昵称 | "+t._s(this.user.nickname)),s("br"),t._v(" 用户地区 | "+t._s(this.user.address)),s("br"),t._v(" 用户ID | "+t._s(this.user.ID)),s("br"),t._v(" 性别 | "+t._s(1===this.user.gender?"男":"女")),s("br"),t._v(" 邮箱 | "+t._s(this.user.email)+" ")]),s("v-card",{staticStyle:{margin:"5vh 5vh",padding:"1vh 2vh","background-color":"rgba(255,255,255,0.3)"},attrs:{outlined:""}},[s("div",{staticStyle:{"text-align":"center"}},[s("h3",[t._v("最 近 活 动")])]),s("br"),t._l(this.recentActivity,(function(e,a){return s("div",{key:a,staticStyle:{margin:"1vh 2vh 3vh",padding:"1vh 5vh","text-align":"center","background-color":"white","border-radius":"5px"}},[s("div",[t._v(t._s(e.hasOwnProperty("text")?e.text:t.setContent(e,a)))])])})),s("div",{staticClass:"text-center"},[s("v-btn",{staticStyle:{margin:"5px"},attrs:{outlined:""},on:{click:t.prevPage}},[t._v("<")]),s("v-btn",{staticStyle:{margin:"5px"},attrs:{outlined:""},on:{click:t.nextPage}},[t._v(">")])],1)],2)],1)},Ie=[],Te={name:"UserInfo",data:function(){return{app:this.$root.$children[0],user:this.$store.state.userDetails,recentActivity:[],currPage:1,paginationSize:5}},mounted:function(){this.queryRecentActivity()},methods:{nextPage:function(){this.currPage++,this.queryRecentActivity()},prevPage:function(){1!==this.currPage?(this.currPage--,this.queryRecentActivity()):this.app.message("已经到头了哦","blue")},setContent:function(t,e){var s="";switch(t.action){case"create":s="创建了 ";break;case"delete":s="删除了 ";break;case"update":s="修改了 ";break;default:s=t.action;break}var a="",n="";switch(console.log(e),t.entity){case"question":a="问题 ",n=t.value?t.value+"...":"";break;case"answer":a="回答 ",n=t.value?t.value+"...":"";break;case"suggestion":a="建议 ";break;case"comment":a="评论 ",n=t.value.content?t.value.content+"...":"";break;default:a=t.entity;break}return"在 "+this.getTime(t.recorded_at)+" "+s+a+n},getTime:function(t){t=new Date(t);var e="";return e+=t.getFullYear()+"-",e+=this.timeComplement(t.getMonth()+1,2)+"-",e+=this.timeComplement(t.getDate(),2)+" ",e+=this.timeComplement(t.getHours(),2)+":",e+=this.timeComplement(t.getMinutes(),2)+":",e+=this.timeComplement(t.getSeconds(),2),e},timeComplement:function(t,e){if(t+="",t.length<e)for(var s=t.length;s<e;s++)t="0"+t;return t},queryRecentActivity:function(){var t=this;return Object(G["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$axios.get("/userServer/activity-records",{params:{pageNum:t.currPage,pageSize:t.paginationSize}}).then((function(e){t.$nextTick((function(){200===e.data.code&&0!==e.data.data.length?t.recentActivity=e.data.data:200===e.data.code&&0===e.data.data.length&&(1!==t.currPage&&t.currPage--,0===t.recentActivity.length?t.recentActivity=[{text:"已经到底了哦"}]:t.app.message("已经到底了哦","blue"))}))}));case 2:case"end":return e.stop()}}),e)})))()}}},Pe=Te,Oe=Object(p["a"])(Pe,qe,Ie,!1,null,"1aeaf7ff",null),Me=Oe.exports;h()(Oe,{VBtn:q["a"],VCard:E["a"]});var Le=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("Questions",{ref:"questions"})},He=[],Qe=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-container",t._l(t.questions,(function(e,a){return s("v-card",{key:a,staticClass:"mt-7",attrs:{color:"rgb(255,255,255,0.5)"}},[s("v-card-title",{staticClass:"text-h4",domProps:{textContent:t._s(e.title)},on:{click:function(s){return t.toAnswerDetails(e.ID)}}}),s("v-card-subtitle",[t._v(" 发起人:"+t._s(e.questionerNickname)+" ")]),s("v-row",{staticClass:"justify-center"},[s("v-col",{attrs:{cols:"11"}},[s("v-expansion-panels",{attrs:{popout:""}},[s("v-expansion-panel",[s("v-expansion-panel-header",[s("strong",[t._v("问题描述")])]),s("v-expansion-panel-content",[s("p",{domProps:{innerHTML:t._s(e.content)}})])],1)],1)],1)],1),s("v-row",{staticClass:"d-flex"},[s("v-spacer"),s("v-col",{attrs:{cols:"5"}},[s("v-btn",{staticClass:"ml-3",attrs:{color:"primary",dark:""},on:{click:function(s){return t.toAnswerDetails(e.ID)}}},[s("v-icon",{attrs:{left:""}},[t._v("mdi-pencil")]),t._v(" 写回答 ")],1),e.isFollowed?t._e():s("v-btn",{staticClass:"ml-3",attrs:{color:"primary",dark:""},on:{click:function(s){return t.followQuestion(e.ID,a)}}},[s("v-icon",{attrs:{left:""}},[t._v("mdi-star")]),t._v(" 关注 ")],1),e.isFollowed?s("v-btn",{staticClass:"ml-3",attrs:{color:"error",dark:""},on:{click:function(s){return t.cancelFollowQuestion(e.ID,a)}}},[s("v-icon",{attrs:{left:""}},[t._v("mdi-bell-cancel")]),t._v(" 取消关注 ")],1):t._e(),s("v-btn",{staticClass:"ml-3",attrs:{color:"success"},on:{click:function(s){return t.toAnswerDetails(e.ID)}}},[s("v-icon",{attrs:{left:""}},[t._v("mdi-comment-multiple-outline")]),t._v(" 查看详情 ")],1),t.canDelete(e.questionerID)?s("v-btn",{staticClass:"ml-3",attrs:{color:"error"},on:{click:function(s){return t.deleteQuestion(e.ID,a)}}},[s("v-icon",{attrs:{left:""}},[t._v("mdi-delete")]),t._v(" 删除 ")],1):t._e()],1)],1)],1)})),1)},Re=[],Ee=(s("a434"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",[a("b",{staticClass:"text-h7 ml-2"},[t._v(t._s(t.answerTotal)+" 条回答：")]),t._l(t.answers,(function(e,s){return a("v-card",{key:s,staticClass:"mt-2",attrs:{color:"rgb(255,255,255,0.6)",outlined:"","min-height":"50px"}},[a("v-row",[a("v-col",{attrs:{cols:"5"}},[a("b",[t._v(t._s(e.answererNickname)+": ")])]),a("v-spacer"),a("v-col",{attrs:{cols:"2"}},[t._v(" "+t._s(e.likesCount)+" "),e.isLiked?t._e():a("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(n){var i=n.on,o=n.attrs;return[a("v-icon",t._g(t._b({staticStyle:{cursor:"pointer"},attrs:{color:"black",dark:""},on:{click:function(a){return t.likeAnswer(e.ID,s,0)}}},"v-icon",o,!1),i),[t._v(" mdi-heart-outline ")])]}}],null,!0)},[a("span",[t._v("点赞")])]),e.isLiked?a("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(n){var i=n.on,o=n.attrs;return[a("v-icon",t._g(t._b({staticStyle:{cursor:"pointer"},attrs:{color:"red"},on:{click:function(a){return t.cancelLikeAnswer(e.ID,s,0)}}},"v-icon",o,!1),i),[t._v(" mdi-cards-heart ")])]}}],null,!0)},[a("span",[t._v("取消点赞")])]):t._e(),t.canDelete(e.answererID)?a("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(n){var i=n.on,o=n.attrs;return[a("v-icon",t._g(t._b({staticStyle:{cursor:"pointer"},attrs:{color:"primary",dark:""},on:{click:function(a){return t.deleteAnswer(e.ID,s)}}},"v-icon",o,!1),i),[t._v(" mdi-delete ")])]}}],null,!0)},[a("span",[t._v("删除")])]):t._e(),t.canDelete(e.answererID)?a("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(n){var i=n.on,o=n.attrs;return[a("v-icon",t._g(t._b({staticStyle:{cursor:"pointer"},attrs:{color:"primary",dark:""},on:{click:function(a){return t.openModifyAnswerDialog(e,s)}}},"v-icon",o,!1),i),[t._v(" mdi-pencil ")])]}}],null,!0)},[a("span",[t._v("修改")])]):t._e()],1)],1),a("v-row",{staticClass:"justify-center",staticStyle:{"margin-top":"-20px"}},[a("v-col",{attrs:{cols:"11"}},[a("p",{domProps:{innerHTML:t._s(e.content)}})])],1),a("v-row",{staticStyle:{"margin-top":"-20px"}},[a("v-col",{attrs:{cols:"3"}},[t._v(t._s(t.getTime(e.UpdatedAt)))]),a("v-col",[a("v-chip",{on:{click:function(e){return t.openCommentDialog(s)}}},[t._v(" 查看评论 ")])],1)],1)],1)})),a("div",{staticClass:"text-center"},[a("v-pagination",{attrs:{length:t.answerPaginationLen,"total-visible":6},on:{input:t.queryAnswers},model:{value:t.answerPage,callback:function(e){t.answerPage=e},expression:"answerPage"}})],1),a("v-dialog",{attrs:{width:"800px"},model:{value:t.isCommentDialogOn,callback:function(e){t.isCommentDialogOn=e},expression:"isCommentDialogOn"}},[[a("v-card",{staticStyle:{padding:"5px"},attrs:{"min-height":"600px",width:"800px"}},[a("v-toolbar",{attrs:{color:"primary",dark:"",outlined:""}},[t._v("回答详情 ")]),a("v-card-text",[a("v-row",[a("v-col",{attrs:{cols:"5"}},[a("b",{staticStyle:{color:"black"}},[t._v(t._s(t.answer.answererNickname)+": ")])]),a("v-spacer"),a("v-col",{attrs:{cols:"2"}},[t._v(" "+t._s(t.answer.likesCount)+" "),t.answer.isLiked?t._e():a("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on,n=e.attrs;return[a("v-icon",t._g(t._b({staticStyle:{cursor:"pointer"},attrs:{color:"black"},on:{click:function(e){return t.likeAnswer(t.answer.ID,t.answerIndex,1)}}},"v-icon",n,!1),s),[t._v(" mdi-heart-outline ")])]}}],null,!1,1601610245)},[a("span",[t._v("点赞")])]),t.answer.isLiked?a("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on,n=e.attrs;return[a("v-icon",t._g(t._b({staticStyle:{cursor:"pointer"},attrs:{color:"red"},on:{click:function(e){return t.cancelLikeAnswer(t.answer.ID,t.answerIndex,1)}}},"v-icon",n,!1),s),[t._v(" mdi-cards-heart ")])]}}],null,!1,92585616)},[a("span",[t._v("取消点赞")])]):t._e(),a("v-btn",{attrs:{text:""},on:{click:function(e){return t.openCommentToDialog(t.answer.answererID)}}},[t._v("回复")])],1)],1),a("v-row",{staticClass:"justify-center",staticStyle:{"margin-top":"-30px"}},[a("v-col",{attrs:{cols:"11"}},[a("p",{staticStyle:{color:"black"},domProps:{innerHTML:t._s(t.answer.content)}})])],1),a("v-divider"),0!==t.commentTotal?a("div",{staticStyle:{"margin-top":"30px"}},[t._l(this.comments,(function(e,s){return a("v-card",{key:s,staticStyle:{color:"black"}},[a("v-row",[a("v-col",{attrs:{cols:"4"}},[t._v(" 来自 "+t._s(e.toNickName)+" ")]),a("v-spacer"),a("v-col",{attrs:{cols:"4"}},[t._v(" "+t._s(e.likesCount)+" "),e.isLiked?t._e():a("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(n){var i=n.on,o=n.attrs;return[a("v-icon",t._g(t._b({attrs:{color:"black"},on:{click:function(a){return t.likeComment(e.ID,s)}}},"v-icon",o,!1),i),[t._v(" mdi-heart-outline ")])]}}],null,!0)},[a("span",[t._v("点赞")])]),e.isLiked?a("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(n){var i=n.on,o=n.attrs;return[a("v-icon",t._g(t._b({staticStyle:{cursor:"pointer"},attrs:{color:"red"},on:{click:function(a){return t.cancelLikeComment(e.ID,s)}}},"v-icon",o,!1),i),[t._v(" mdi-cards-heart ")])]}}],null,!0)},[a("span",[t._v("取消点赞")])]):t._e(),t.canDelete(e.fromID)?a("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(n){var i=n.on,o=n.attrs;return[a("v-icon",t._g(t._b({staticStyle:{cursor:"pointer"},attrs:{color:"primary"},on:{click:function(a){return t.deleteComment(e.ID,s)}}},"v-icon",o,!1),i),[t._v(" mdi-delete ")])]}}],null,!0)},[a("span",[t._v("删除")])]):t._e()],1)],1),a("v-row",{staticStyle:{"margin-top":"-15px"}},[void 0!==e.content?a("v-col",{staticClass:"ml-4",attrs:{cols:"11"}},[t._v(t._s(e.content))]):t._e(),void 0===e.content?a("v-col",{staticClass:"ml-4",attrs:{cols:"11"}},[t._v("该评论已被删除")]):t._e()],1)],1)})),a("v-pagination",{staticStyle:{"margin-top":"20px"},attrs:{length:t.commentPaginationLen,"total-visible":6},on:{input:t.queryComments},model:{value:t.commentPage,callback:function(e){t.commentPage=e},expression:"commentPage"}})],2):t._e(),"0"===t.commentTotal?a("div",[a("v-row",{staticClass:"justify-center"},[a("v-col",{attrs:{cols:"4"}},[a("v-img",{attrs:{src:s("4edd"),alt:"Logo",width:"250px",height:"189px"}})],1)],1),a("v-row",{staticClass:"justify-center text-center"},[a("p",[t._v("暂无评论")])])],1):t._e()],1)],1)]],2),a("v-dialog",{attrs:{transition:"dialog-bottom-transition",width:"600px",persistent:""},model:{value:t.isModifyAnswerDialogOn,callback:function(e){t.isModifyAnswerDialogOn=e},expression:"isModifyAnswerDialogOn"}},[a("v-card",[a("v-toolbar",{attrs:{color:"primary",dark:""}},[t._v("修改答案 ")]),a("v-card-text",{staticClass:"mt-5"},[a("MarkdownInput",{ref:"modifyAnswerMarkdownInput",attrs:{placeholder:"你的答案..."},on:{transformHtml:t.receiveModifyAnswerHtml}})],1),a("v-card-actions",{staticClass:"justify-end"},[a("v-btn",{staticClass:"mb-4 mr-4",attrs:{elevation:"2",color:"primary",depressed:""},on:{click:t.submitModifyAnswer}},[t._v("提交")]),a("v-btn",{staticClass:"mb-4 mr-4",attrs:{elevation:"2",color:"primary",depressed:""},on:{click:t.closeModifyAnswerDialog}},[t._v("取消 ")])],1)],1)],1),a("v-dialog",{attrs:{transition:"dialog-bottom-transition",width:"600px",persistent:""},model:{value:t.isCommentToDialogOn,callback:function(e){t.isCommentToDialogOn=e},expression:"isCommentToDialogOn"}},[a("v-card",[a("v-toolbar",{attrs:{color:"primary",dark:""}},[t._v("评论 ")]),a("v-card-text",{staticClass:"mt-5"},[a("v-textarea",{attrs:{color:"black",label:"评论"},model:{value:t.commentContent,callback:function(e){t.commentContent=e},expression:"commentContent"}})],1),a("v-card-actions",{staticClass:"justify-end"},[a("v-btn",{staticClass:"mb-4 mr-4",attrs:{elevation:"2",color:"primary",depressed:""},on:{click:t.submitComment}},[t._v("提交")]),a("v-btn",{staticClass:"mb-4 mr-4",attrs:{elevation:"2",color:"primary",depressed:""},on:{click:t.closeCommentToDialog}},[t._v("取消 ")])],1)],1)],1)],2)}),Fe=[],Ne=(s("a15b"),{name:"Comments",props:["questionID"],components:{MarkdownInput:ce},data:function(){return{app:this.$root.$children[0],total:7,isCommentDialogOn:!1,answerTotal:0,answerPage:1,answerPageSize:5,answerPaginationLen:1,answerIndex:-1,answers:[],answer:{},isCommentToDialogOn:!1,commentTo:"",commentContent:"",comments:[],commentTotal:0,commentPage:1,commentPageSize:5,commentPaginationLen:1,isModifyAnswerDialogOn:!1,modifyAnswer:{},modifyAnswerIndex:0,modifyAnswerContent:""}},methods:{canDelete:function(t){return t===this.$store.state.userDetails.ID},receiveModifyAnswerHtml:function(t){this.modifyAnswerContent=t},submitModifyAnswer:function(){var t=this,e="/userServer/answers/"+this.modifyAnswer.ID;this.app.overlay=!0,this.$axios.put(e,{content:this.modifyAnswerContent}).then((function(e){200===e.data.code?(t.closeModifyAnswerDialog(),t.$set(t.answers[t.modifyAnswerIndex],"content",t.modifyAnswerContent),t.modifyAnswerContent="  ",t.$refs.modifyAnswerMarkdownInput.content="",t.app.message("评论修改成功","success")):t.app.message("修改失败","warning")})).catch((function(){t.app.message("服务器在忙","red")})),this.app.overlay=!1},openModifyAnswerDialog:function(t,e){this.isModifyAnswerDialogOn=!0,this.modifyAnswer=t,this.modifyAnswerIndex=e},closeModifyAnswerDialog:function(){this.isModifyAnswerDialogOn=!1},getTime:function(t){t=new Date(t);var e="";return e+=t.getFullYear()+"-",e+=this.timeComplement(t.getMonth()+1,2)+"-",e+=this.timeComplement(t.getDate(),2)+" ",e+=this.timeComplement(t.getHours(),2)+":",e+=this.timeComplement(t.getMinutes(),2)+":",e+=this.timeComplement(t.getSeconds(),2),e},timeComplement:function(t,e){if(t+="",t.length<e)for(var s=t.length;s<e;s++)t="0"+t;return t},openCommentDialog:function(t){this.answerIndex=t,this.answer=this.answers[t],this.isCommentDialogOn=!0,this.queryComments()},deleteAnswer:function(t,e){var s=this;if(!this.app.overlay){var a="/userServer/answers/"+t;this.app.overlay=!0,this.$axios.delete(a,{}).then((function(t){200===t.data.code?(s.app.message("删除成功","success"),s.answers.splice(e,1)):s.app.message("已经删除，正在清理数据","red"),s.queryAnswers(),s.app.overlay=!1})).catch((function(){s.app.message("服务器在忙","red")}))}},queryAnswers:function(){var t=this,e="/userServer/questions/"+this.questionID+"/answers";this.app.overlay=!0,this.$axios.get(e,{params:{pageNum:this.answerPage,pageSize:this.answerPageSize,orderBy:"created_at asc"}}).then((function(e){if(200===e.data.code){t.answerTotal=e.headers.totalcount,t.answerPaginationLen=Math.ceil(t.answerTotal/t.answerPageSize);for(var s=e.data.data,a=[],n="",i=0;i<s.length;i++)a.push(s[i].ID),s[i].content="   "+s[i].content,s[i].answererNickname=s[i].answerer.nickname,delete s[i].answerer;t.answers=s;for(var o=0;o<s.length;o++){var r="/userServer/answers/"+s[o].ID+"/likes";t.getAnswerIsLiked(r,{},o)}n=a.join(","),t.$axios.get("/userServer/answers/likes/counts",{params:{"answer-ids":n}}).then((function(e){if(200===e.data.code)for(var a=e.data.data,n=0;n<s.length;n++)t.$set(t.answers[n],"likesCount",a[n])})).catch((function(){t.app.message("服务器在忙","red")}))}t.app.overlay=!1})).catch((function(){t.app.message("服务器在忙","red")}))},getAnswerIsLiked:function(t,e,s){var a=this;return Object(G["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,a.$axios.get(t,e).then((function(t){200===t.data.code?a.$set(a.answers[s],"isLiked",t.data.data):a.$set(a.answers[s],"isLiked",!1)})).catch((function(){a.app.message("服务器在忙","red")}));case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}}),n)})))()},likeAnswer:function(t,e,s){var a=this,n="/userServer/answers/"+t+"/likes";this.app.overlay=!0,this.$axios.post(n,{}).then((function(t){if(200===t.data.code){var n=a.answers[e];n.isLiked=!0,n.likesCount=n.likesCount+1,a.answers.splice(e,1,n),1===s&&(a.answer=a.answers[e])}})).catch((function(){a.app.message("服务器在忙","red")})),this.app.overlay=!1},cancelLikeAnswer:function(t,e,s){var a=this,n="/userServer/answers/"+t+"/likes";this.app.overlay=!0,this.$axios.delete(n,{}).then((function(t){if(200===t.data.code){var n=a.answers[e];n.isLiked=!1,n.likesCount>0&&(n.likesCount=n.likesCount-1),a.answers.splice(e,1,n),1===s&&(a.answer=a.answers[e])}})).catch((function(){a.app.message("服务器在忙","red")})),this.app.overlay=!1},openCommentToDialog:function(t){this.commentTo=t,this.isCommentToDialogOn=!0},closeCommentToDialog:function(){this.isCommentToDialogOn=!1},submitComment:function(){var t=this;if(!this.app.overlay)if(""!==this.commentContent){var e="/userServer/answers/"+this.answer.ID+"/comments";this.app.overlay=!0,this.$axios.post(e,{content:this.commentContent,to_id:this.commentTo}).then((function(e){200===e.data.code&&(t.commentContent="",t.app.message("评论提交成功，正在写入数据库,请在一段时候查询","success"),t.sleep(1e3),t.queryComments(),t.closeCommentToDialog()),t.app.overlay=!1})).catch((function(){t.app.message("服务器在忙","red")}))}else this.app.message("评论内容不能为空","warning")},queryComments:function(){var t=this,e="/userServer/answers/"+this.answer.ID+"/comments";this.app.overlay=!0,this.$axios.get(e,{params:{pageNum:this.commentPage,pageSize:this.commentPageSize,orderBy:"created_at asc"}}).then((function(s){if(200===s.data.code){t.commentTotal=s.headers.totalcount,t.commentPaginationLen=Math.ceil(t.commentTotal/t.commentPageSize);for(var a=s.data.data,n=[],i=0;i<a.length;i++)n.push(a[i].ID),a[i].fromNickname=a[i].from.nickname,a[i].toNickName=a[i].to.nickname,delete a[i].from,delete a[i].to;t.comments=a;for(var o=0;o<t.comments.length;o++)e="/userServer/comments/"+a[o].ID+"/likes",t.getCommentIsLiked(e,{},o);var r=n.join(",");e="/userServer/comments/likes/counts",t.$axios.get(e,{params:{"comment-ids":r}}).then((function(e){if(200===e.data.code)for(var s=e.data.data,a=0;a<t.comments.length;a++)t.$set(t.comments[a],"likesCount",s[a])})).catch((function(){t.app.message("服务器在忙","red")}))}t.app.overlay=!1})).catch((function(){t.app.message("服务器在忙","red")}))},getCommentIsLiked:function(t,e,s){var a=this;return Object(G["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,a.$axios.get(t,e).then((function(t){200===t.data.code?a.$set(a.comments[s],"isLiked",t.data.data):a.$set(a.comments[s],"isLiked",!1)})).catch((function(){a.app.message("服务器在忙","red")}));case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}}),n)})))()},likeComment:function(t,e){var s=this,a="/userServer/comments/"+t+"/likes";this.app.overlay=!0,this.$axios.post(a,{}).then((function(t){if(200===t.data.code){var a=s.comments[e];a.isLiked=!0,a.likesCount=a.likesCount+1,s.comments.splice(e,1,a)}500===t.data.code&&s.app.message("该评论已删除","warning"),s.app.overlay=!1})).catch((function(){s.app.message("服务器在忙","red")}))},isCommentLikeAxios:function(t){var e="/userServer/comments/"+t+"/likes";return this.$axios({url:e,method:"get",params:{}})},cancelLikeComment:function(t,e){var s=this,a="/userServer/comments/"+t+"/likes";this.$axios.delete(a,{}).then((function(t){if(200===t.data.code){var a=s.comments[e];a.isLiked=!1,a.likesCount>0&&(a.likesCount=a.likesCount-1),s.comments.splice(e,1,a)}})).catch((function(){s.app.message("服务器在忙","red")}))},deleteComment:function(t,e){var s=this,a="/userServer/comments/"+t;this.app.overlay=!0,this.$axios.delete(a,{}).then((function(t){200===t.data.code?(s.app.message("评论删除成功","success"),s.$set(s.comments[e],"content",void 0)):s.app.message("评论删除失败","warning")})).catch((function(){s.app.message("服务器在忙","red")})),this.app.overlay=!1},sleep:function(t){for(var e=new Date,s=e.getTime()+t;;){var a=new Date;if(a.getTime()>s)return}}}}),ze=Ne,Ue=s("cc20"),Be=s("ce7e"),Je=s("891e"),Ge=Object(p["a"])(ze,Ee,Fe,!1,null,"6912b27b",null),We=Ge.exports;h()(Ge,{VBtn:q["a"],VCard:E["a"],VCardActions:F["a"],VCardText:F["c"],VChip:Ue["a"],VCol:Ot["a"],VContainer:_t["a"],VDialog:bt["a"],VDivider:Be["a"],VIcon:I["a"],VImg:T["a"],VPagination:Je["a"],VRow:Lt["a"],VSpacer:P["a"],VTextarea:wt["a"],VToolbar:kt["a"],VTooltip:Qt["a"]});var Ye={name:"Questions",data:function(){return{app:this.$root.$children[0],questions:[]}},methods:{goTo:function(t){this.$router.replace(t)},transferData:function(t){this.questions=t},canDelete:function(t){return t===this.$store.state.userDetails.ID},toAnswerDetails:function(t){this.$router.push({name:"QuestionDetails",params:{questionID:t}})},followQuestion:function(t,e){var s=this,a="/userServer/questions/"+t+"/follows";this.$axios.post(a,{}).then((function(t){200===t.data.code&&s.$set(s.questions[e],"isFollowed",!0)})).catch((function(){s.app.message("服务器在忙","red")}))},deleteQuestion:function(t,e){var s=this,a="/userServer/questions/"+t;this.$axios.delete(a,{}).then((function(t){200===t.data.code&&(s.app.message("问题删除成功","success"),s.questions.splice(e,1))})).catch((function(){s.app.message("服务器在忙","red")}))},cancelFollowQuestion:function(t,e){var s=this,a="/userServer/questions/"+t+"/follows";this.$axios.delete(a,{}).then((function(t){200===t.data.code&&s.$set(s.questions[e],"isFollowed",!1)})).catch((function(){s.app.message("服务器在忙","red")}))}}},Xe=Ye,Ze=(s("846d"),s("cd55")),Ke=s("49e2"),ts=s("c865"),es=s("0393"),ss=Object(p["a"])(Xe,Qe,Re,!1,null,"4ea5098b",null),as=ss.exports;h()(ss,{VBtn:q["a"],VCard:E["a"],VCardSubtitle:F["b"],VCardTitle:F["d"],VCol:Ot["a"],VContainer:_t["a"],VExpansionPanel:Ze["a"],VExpansionPanelContent:Ke["a"],VExpansionPanelHeader:ts["a"],VExpansionPanels:es["a"],VIcon:I["a"],VRow:Lt["a"],VSpacer:P["a"]});var ns={name:"FollowingQuestions",components:{Questions:as},data:function(){return{questions:[{ID:11,questionerID:4,questionerNickName:"yyt",title:"Test2 Following",content:"<p><strong>Test2问题描述:</strong>yyt不会</p>",likes:1,CreatedAt:"0001-01-01T00:00:00Z",DeletedAt:null,UpdatedAt:"0001-01-01T00:00:00Z"}]}}},is=ns,os=Object(p["a"])(is,Le,He,!1,null,"2db306ad",null),rs=os.exports,cs=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("Questions",{ref:"questions"})],1)},ls=[],us={name:"HotQuestions",components:{Questions:as},data:function(){return{app:this.$root.$children[0]}},methods:{getHotQuestions:function(){var t=this;!0!==this.app.overlay&&(this.app.overlay=!0,this.questions=[],this.axios.get("/userServer/hot-list",{}).then((function(e){if(200===e.status&&200===e.data.code){t.questions=e.data.data;for(var s=0;s<t.questions.length;s++){var a=t.questions[s].ID,n=t.questions[s].questionerID;t.isQuestionFollowed(a,s),t.queryQuestionerNickname(n,s)}t.$refs.questions.transferData(t.questions)}t.app.overlay=!1})).catch((function(){t.app.message("服务器在忙","red")})))},isQuestionFollowed:function(t,e){var s=this;this.$axios.get("/userServer/questions/"+t+"/follows",{params:{"question-id":t}}).then((function(t){t.data.code,s.$set(s.questions[e],"isFollowed",t.data.data)})).catch((function(){s.app.message("服务器在忙","red")}))},queryQuestionerNickname:function(t,e){var s=this;this.$axios.get("/userServer/users/"+t,{params:{"user-id":t}}).then((function(t){200===t.data.code?s.$set(s.questions[e],"questionerNickname",t.data.data.nickname):s.$set(s.questions[e],"questionerNickname","未知")})).catch((function(){s.app.message("服务器在忙","red")}))}},mounted:function(){this.getHotQuestions()}},ds=us,ps=Object(p["a"])(ds,cs,ls,!1,null,"68473933",null),ms=ps.exports,hs=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("Questions",{ref:"questions"}),0!=t.questionTotal?s("v-pagination",{attrs:{length:t.questionPaginationLen,"total-visible":6},on:{input:t.searchQuestion},model:{value:t.questionPage,callback:function(e){t.questionPage=e},expression:"questionPage"}}):t._e()],1)},vs=[],fs={name:"SearchedQuestions",components:{Questions:as},props:["search"],data:function(){return{app:this.$root.$children[0],questions:[],questionTotal:0,questionPage:1,questionPaginationLen:1,questionPageSize:5}},methods:{searchQuestion:function(){var t=this;!0!==this.app.overlay&&""!==this.search&&(this.app.overlay=!0,this.questions=[],this.axios.get("/userServer/questions",{params:{search:this.search,pageNum:this.questionPage,pageSize:this.questionPageSize}}).then((function(e){var s=e.headers.totalcount;if(console.log(s),t.questionPaginationLen=Math.ceil(s/t.questionPageSize),200===e.status&&200===e.data.code){t.questions=e.data.data;for(var a=0;a<t.questions.length;a++){var n=t.questions[a].ID,i=t.questions[a].questionerID;t.isQuestionFollowed(n,a),t.queryQuestionerNickname(i,a)}t.$refs.questions.transferData(t.questions)}})).catch((function(t){console.log(t)})),this.app.overlay=!1)},isQuestionFollowed:function(t,e){var s=this;this.$axios.get("/userServer/questions/"+t+"/follows",{params:{"question-id":t}}).then((function(t){t.data.code,s.$set(s.questions[e],"isFollowed",t.data.data)})).catch((function(){s.app.message("服务器在忙","red")}))},queryQuestionerNickname:function(t,e){var s=this;this.$axios.get("/userServer/users/"+t,{params:{"user-id":t}}).then((function(t){200===t.data.code?s.$set(s.questions[e],"questionerNickname",t.data.data.nickname):s.$set(s.questions[e],"questionerNickname","未知")})).catch((function(){s.app.message("服务器在忙","red")}))}},mounted:function(){this.searchQuestion()}},gs=fs,_s=Object(p["a"])(gs,hs,vs,!1,null,"879ee796",null),bs=_s.exports;h()(_s,{VPagination:Je["a"]});var ys=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-container",[s("v-card",{attrs:{color:"rgb(255,255,255,0.5)"}},[s("v-row",[s("v-col",{staticClass:"ml-4",attrs:{cols:"5"}},[s("h2",[t._v(t._s(t.question.title))])])],1),s("v-row",[s("v-col",{staticClass:"ml-6",attrs:{cols:"5"}},[s("strong",[t._v("发起人: ")]),t._v(t._s(t.questioner.nickname))]),s("v-spacer"),s("v-col",{attrs:{cols:"3"}},[s("strong",[t._v("创建时间: ")]),t._v(t._s(t.getTime(t.question.CreatedAt)))]),s("v-col",{attrs:{cols:"3"}},[s("strong",[t._v("更新时间: ")]),t._v(t._s(t.getTime(t.question.UpdatedAt)))])],1),s("v-row",{staticClass:"justify-center"},[s("v-col",{attrs:{cols:"11"}},[s("v-expansion-panels",{attrs:{popout:""}},[s("v-expansion-panel",[s("v-expansion-panel-header",[s("strong",[t._v("问题描述")])]),s("v-expansion-panel-content",[s("p",{domProps:{innerHTML:t._s(t.question.content)}})])],1)],1)],1)],1),s("v-row",[s("v-spacer"),s("v-col",{attrs:{cols:"4"}},[s("v-btn",{attrs:{tile:"",color:"primary"},on:{click:t.openAnswerDialog}},[s("v-icon",{attrs:{left:""}},[t._v("mdi-pencil")]),t._v(" 写回答 ")],1),t.question.isFollowed?t._e():s("v-btn",{staticClass:"ml-3",attrs:{color:"primary",dark:""},on:{click:function(e){return t.followQuestion(t.question.ID)}}},[s("v-icon",{attrs:{left:""}},[t._v("mdi-star")]),t._v(" 关注 ")],1),t.question.isFollowed?s("v-btn",{staticClass:"ml-3",attrs:{color:"error",dark:""},on:{click:function(e){return t.cancelFollowQuestion(t.questionID)}}},[s("v-icon",{attrs:{left:""}},[t._v("mdi-bell-cancel")]),t._v(" 取消关注 ")],1):t._e()],1)],1)],1),s("v-card",{staticClass:"mt-8",attrs:{color:"rgb(255,255,255,0.5)"}},[s("Answers",{ref:"Answers",attrs:{questionID:t.questionID}})],1),s("v-dialog",{attrs:{persistent:"","max-width":"800px"},model:{value:t.isAnswerDialogOn,callback:function(e){t.isAnswerDialogOn=e},expression:"isAnswerDialogOn"}},[[s("v-card",[s("v-toolbar",{attrs:{color:"primary",dark:""}},[t._v("写下你的答案 ")]),s("v-card-text",{staticClass:"mt-5"},[s("MarkdownInput",{ref:"markdownInput",attrs:{placeholder:"你的答案..."},on:{transformHtml:t.receiveHtml}})],1),s("v-card-actions",{staticClass:"justify-end"},[s("v-btn",{staticClass:"mb-4 mr-4",attrs:{elevation:"2",color:"primary",depressed:""},on:{click:t.submitAnswer}},[t._v("提交回答")]),s("v-btn",{staticClass:"mb-4 mr-4",attrs:{elevation:"2",color:"primary",depressed:""},on:{click:t.cancelAnswerDialog}},[t._v("取消")])],1)],1)]],2)],1)},ws=[],ks={name:"QuestionDetails",components:{MarkdownInput:ce,Answers:We},data:function(){return{app:this.$root.$children[0],answer:"",page:1,isAnswerDialogOn:!1,question:{},questioner:{},answers:{},pageSize:5,paginationLen:2}},methods:{goTo:function(t){this.$router.replace(t)},receiveHtml:function(t){this.answer=t},cancelAnswerDialog:function(){this.isAnswerDialogOn=!1},openAnswerDialog:function(){this.isAnswerDialogOn=!0},judgeAnswerCanPost:function(){return""!==this.answer||(this.app.message("答案不能为空"),!1)},submitAnswer:function(){var t=this;if(!this.app.overlay){var e=this.judgeAnswerCanPost();if(e){this.app.overlay=!0;var s="/userServer/questions/"+this.question.ID+"/answers";this.$axios.post(s,{content:this.answer}).then((function(e){200===e.data.code?(t.answer="",t.$refs.markdownInput.content="",t.cancelAnswerDialog(),t.app.message("回答提交成功","success"),t.$refs.Answers.queryAnswers()):t.app.message("回答提交失败","warning"),t.app.overlay=!1})).catch((function(e){t.app.message("服务器在忙","red")}))}}},getTime:function(t){t=new Date(t);var e="";return e+=t.getFullYear()+"-",e+=this.timeComplement(t.getMonth()+1,2)+"-",e+=this.timeComplement(t.getDate(),2)+" ",e+=this.timeComplement(t.getHours(),2)+":",e+=this.timeComplement(t.getMinutes(),2)+":",e+=this.timeComplement(t.getSeconds(),2),e},timeComplement:function(t,e){if(t+="",t.length<e)for(var s=t.length;s<e;s++)t="0"+t;return t},getQuestionDetails:function(t){var e=this,s="/userServer/questions/"+this.questionID;this.$axios.get(s,{}).then((function(a){200===a.status&&200===a.data.code?(e.question=a.data.data,e.questioner=e.question.questioner,s="/userServer/questions/"+e.questionID+"/follows",e.$axios.get(s,{params:{"question-id":t}}).then((function(t){200===t.data.code?e.$set(e.question,"isFollowed",t.data.data):e.$set(e.question,"isFollowed",!1)}))):e.app.message("数据加载失败","warning")})).catch((function(){e.app.message("服务器在忙","red")}))},followQuestion:function(t){var e=this,s="/userServer/questions/"+t+"/follows";this.$axios.post(s,{}).then((function(t){200===t.data.code&&e.$set(e.question,"isFollowed",!0)})).catch((function(){e.app.message("服务器在忙","red")}))},cancelFollowQuestion:function(t){var e=this,s="/userServer/questions/"+t+"/follows";this.$axios.delete(s,{}).then((function(t){200===t.data.code&&e.$set(e.question,"isFollowed",!1)})).catch((function(){e.app.message("服务器在忙","red")}))},sleep:function(t){for(var e=new Date,s=e.getTime()+t;;){var a=new Date;if(a.getTime()>s)return}}},props:["questionID"],mounted:function(){this.getQuestionDetails(this.questionID),this.$refs.Answers.queryAnswers()}},xs=ks,Cs=Object(p["a"])(xs,ys,ws,!1,null,"6f72c275",null),As=Cs.exports;h()(Cs,{VBtn:q["a"],VCard:E["a"],VCardActions:F["a"],VCardText:F["c"],VCol:Ot["a"],VContainer:_t["a"],VDialog:bt["a"],VExpansionPanel:Ze["a"],VExpansionPanelContent:Ke["a"],VExpansionPanelHeader:ts["a"],VExpansionPanels:es["a"],VIcon:I["a"],VRow:Lt["a"],VSpacer:P["a"],VToolbar:kt["a"]});var Ss=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("Suggestions",{ref:"Suggestions"})],1)},Ds=[],$s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-container",[s("v-row",{staticClass:"justify-center"},[s("v-col",{attrs:{cols:"5"}},[s("v-file-input",{ref:"file",attrs:{counter:"",chips:"",multiple:"",label:"大量数据导入,请导入前缀为spo,entity以及relation的csv文件",outlined:"",dense:"",acce:""},model:{value:t.files,callback:function(e){t.files=e},expression:"files"}})],1),s("v-col",{attrs:{cols:"3"}},[s("v-btn",{attrs:{color:"primary",text:""},on:{click:t.submitFiles}},[t._v("上传")])],1)],1),t._l(t.suggestions,(function(e,a){return s("v-card",{key:a,staticClass:"mt-2",attrs:{color:"rgb(255,255,255,0.6)",outlined:"","min-height":"50px"}},[s("v-row",[s("v-col",{attrs:{cols:"5"}},[s("b",[t._v("建议提出者: "+t._s(e.suggester_name))])]),s("v-spacer"),s("v-col",[s("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(n){var i=n.on,o=n.attrs;return[s("v-icon",t._g(t._b({staticStyle:{cursor:"pointer"},attrs:{color:"primary",dark:""},on:{click:function(s){return t.openDialog(e,a)}}},"v-icon",o,!1),i),[t._v(" mdi-pencil ")])]}}],null,!0)},[s("span",[t._v("修改")])])],1)],1),s("v-row",{staticClass:"justify-center",staticStyle:{"margin-top":"-20px"}},[s("v-col",{attrs:{cols:"11"}},[s("p",{domProps:{innerHTML:t._s(e.content)}})])],1),s("v-row",{staticStyle:{"margin-top":"-20px"}},[s("v-col",{attrs:{cols:"3"}},[s("b",[t._v("提交时间")]),t._v(": 2021-4-21 12:30:12")])],1)],1)})),s("div",{staticClass:"text-center"},[s("v-btn",{staticStyle:{margin:"5px"},attrs:{outlined:""},on:{click:t.prevPage}},[t._v("<")]),s("v-btn",{staticStyle:{margin:"5px"},attrs:{outlined:""},on:{click:t.nextPage}},[t._v(">")])],1),s("v-dialog",{attrs:{transition:"dialog-bottom-transition",width:"900px",persistent:""},model:{value:t.isDialogOn,callback:function(e){t.isDialogOn=e},expression:"isDialogOn"}},[s("v-card",[s("v-toolbar",{attrs:{color:"primary",dark:""}},[t._v("评论 ")]),s("v-card-text",{staticClass:"mt-5"},[s("v-textarea",{attrs:{color:"black",label:"评论"},model:{value:t.comment,callback:function(e){t.comment=e},expression:"comment"}}),s("v-row",{staticClass:"justify-center"},[s("v-col",{attrs:{cols:"12"}},[s("p",[t._v("修改方式选择")]),t._l(t.operations,(function(e,a){return s("v-btn",{key:a,staticClass:"mb-4 mr-4",attrs:{elevation:"2",color:e.color,depressed:""},on:{click:function(e){return t.chooseOperation(a)}}},[t._v(" "+t._s(e.name)+" ")])}))],2)],1),t.operations[0].on?s("v-card",[s("v-row",{staticClass:"justify-center"},[s("v-col",{attrs:{cols:"3"}},[s("v-text-field",{ref:"add_spo_subject",attrs:{label:"主语",dense:"",outlined:""},model:{value:t.add_spo_subject,callback:function(e){t.add_spo_subject=e},expression:"add_spo_subject"}})],1),s("v-col",{attrs:{cols:"3"}},[s("v-text-field",{ref:"add_spo_predicate",attrs:{label:"谓词",dense:"",outlined:""},model:{value:t.add_spo_predicate,callback:function(e){t.add_spo_predicate=e},expression:"add_spo_predicate"}})],1),s("v-col",{attrs:{cols:"3"}},[s("v-text-field",{ref:"add_spo_object",attrs:{label:"宾语",dense:"",outlined:""},model:{value:t.add_spo_object,callback:function(e){t.add_spo_object=e},expression:"add_spo_object"}})],1)],1),s("v-row",{staticStyle:{"margin-top":"-20px"}},[s("v-col",{attrs:{cols:"2"}},[s("p",[t._v("将添加的三元组")])]),s("v-col",{attrs:{cols:"10"}},t._l(t.add_spo_value,(function(e,a){return s("v-chip",{key:a,attrs:{close:""},on:{"click:close":function(e){return t.deleteAddSPO(a)}}},[t._v(" "+t._s(e.subject)+" "+t._s(e.predicate)+" "+t._s(e.spo)+" ")])})),1)],1),s("v-card-actions",{staticClass:"justify-end"},[s("v-btn",{staticClass:"mb-4 mr-4",attrs:{elevation:"2",color:"primary",depressed:""},on:{click:t.addAddSPO}},[t._v("添加")])],1)],1):t._e(),t.operations[1].on?s("v-card",[s("v-row",{staticClass:"justify-center"},[s("v-col",{attrs:{cols:"3"}},[s("v-text-field",{ref:"del_spo_subject",attrs:{label:"主语",dense:"",outlined:""},model:{value:t.del_spo_subject,callback:function(e){t.del_spo_subject=e},expression:"del_spo_subject"}})],1),s("v-col",{attrs:{cols:"3"}},[s("v-text-field",{ref:"del_spo_predicate",attrs:{label:"谓词",dense:"",outlined:""},model:{value:t.del_spo_predicate,callback:function(e){t.del_spo_predicate=e},expression:"del_spo_predicate"}})],1),s("v-col",{attrs:{cols:"3"}},[s("v-text-field",{ref:"del_spo_object",attrs:{label:"宾语",dense:"",outlined:""},model:{value:t.del_spo_object,callback:function(e){t.del_spo_object=e},expression:"del_spo_object"}})],1)],1),s("v-row",{staticStyle:{"margin-top":"-20px"}},[s("v-col",{attrs:{cols:"2"}},[s("p",[t._v("将删除的三元组")])]),s("v-col",{attrs:{cols:"10"}},t._l(t.del_spo_value,(function(e,a){return s("v-chip",{key:a,attrs:{close:""},on:{"click:close":function(e){return t.deleteDelSPO(a)}}},[t._v(" "+t._s(e.subject)+" "+t._s(e.predicate)+" "+t._s(e.spo)+" ")])})),1)],1),s("v-card-actions",{staticClass:"justify-end"},[s("v-btn",{staticClass:"mb-4 mr-4",attrs:{elevation:"2",color:"primary",depressed:""},on:{click:t.addDelSPO}},[t._v("添加")])],1)],1):t._e(),t.operations[2].on?s("v-card",[s("v-row",{staticClass:"justify-center"},[s("v-col",{attrs:{cols:"5"}},[s("v-text-field",{ref:"old_primary",attrs:{label:"原主名",dense:"",outlined:""},model:{value:t.old_primary,callback:function(e){t.old_primary=e},expression:"old_primary"}})],1),s("v-col",{attrs:{cols:"5"}},[s("v-text-field",{ref:"new_primary",attrs:{label:"新主名",dense:"",outlined:""},model:{value:t.new_primary,callback:function(e){t.new_primary=e},expression:"new_primary"}})],1)],1)],1):t._e(),t.operations[3].on?s("v-card",[s("v-row",{staticClass:"justify-center"},[s("v-col",{attrs:{cols:"5"}},[s("v-text-field",{ref:"add_aliases_primary",attrs:{label:"添加主名",dense:"",outlined:""},model:{value:t.add_aliases_primary,callback:function(e){t.add_aliases_primary=e},expression:"add_aliases_primary"}})],1),s("v-col",{attrs:{cols:"5"}},[s("v-text-field",{ref:"add_aliases_aliase",attrs:{label:"别名",dense:"",outlined:""},model:{value:t.add_aliases_aliase,callback:function(e){t.add_aliases_aliase=e},expression:"add_aliases_aliase"}})],1)],1),s("v-row",{staticStyle:{"margin-top":"-20px"}},[s("v-col",{attrs:{cols:"2"}},[s("p",[t._v("将添加的别名")])]),s("v-col",{attrs:{cols:"10"}},t._l(t.add_aliases_arr,(function(e,a){return s("v-chip",{key:a,attrs:{close:""},on:{"click:close":function(e){return t.deleteAddAliase(a)}}},[t._v(" "+t._s(e)+" ")])})),1)],1),s("v-card-actions",{staticClass:"justify-end"},[s("v-btn",{staticClass:"mb-4 mr-4",attrs:{elevation:"2",color:"primary",depressed:""},on:{click:t.addAddAliase}},[t._v("添加")])],1)],1):t._e(),t.operations[4].on?s("v-card",[s("v-row",{staticClass:"justify-center"},[s("v-col",{attrs:{cols:"5"}},[s("v-text-field",{ref:"del_aliases_primary",attrs:{label:"删除主名",dense:"",outlined:""},model:{value:t.del_aliases_primary,callback:function(e){t.del_aliases_primary=e},expression:"del_aliases_primary"}})],1),s("v-col",{attrs:{cols:"5"}},[s("v-text-field",{ref:"del_aliases_aliase",attrs:{label:"别名",dense:"",outlined:""},model:{value:t.del_aliases_aliase,callback:function(e){t.del_aliases_aliase=e},expression:"del_aliases_aliase"}})],1)],1),s("v-row",{staticStyle:{"margin-top":"-20px"}},[s("v-col",{attrs:{cols:"2"}},[s("p",[t._v("将删除的别名")])]),s("v-col",{attrs:{cols:"10"}},t._l(t.del_aliases_arr,(function(e,a){return s("v-chip",{key:a,attrs:{close:""},on:{"click:close":function(e){return t.deleteDelAliase(a)}}},[t._v(" "+t._s(e)+" ")])})),1)],1),s("v-card-actions",{staticClass:"justify-end"},[s("v-btn",{staticClass:"mb-4 mr-4",attrs:{elevation:"2",color:"primary",depressed:""},on:{click:t.addDelAliase}},[t._v("添加")])],1)],1):t._e(),t.operations[5].on?s("v-card",[s("v-row",{staticClass:"justify-center"},[s("v-col",{attrs:{cols:"5"}},[s("v-text-field",{ref:"add_object_primary",attrs:{label:"新对象主名",dense:"",outlined:""},model:{value:t.add_object_primary,callback:function(e){t.add_object_primary=e},expression:"add_object_primary"}})],1),s("v-col",{attrs:{cols:"5"}},[s("v-text-field",{ref:"add_object_aliase",attrs:{label:"别名",dense:"",outlined:""},model:{value:t.add_object_aliase,callback:function(e){t.add_object_aliase=e},expression:"add_object_aliase"}})],1)],1),s("v-row",{staticStyle:{"margin-top":"-20px"}},[s("v-col",{attrs:{cols:"2"}},[s("p",[t._v("新对象的别名")])]),s("v-col",{attrs:{cols:"10"}},t._l(t.add_object_aliases,(function(e,a){return s("v-chip",{key:a,attrs:{close:""},on:{"click:close":function(e){return t.deleteObjAliase(a)}}},[t._v(" "+t._s(e)+" ")])})),1)],1),s("v-card-actions",{staticClass:"justify-end"},[s("v-btn",{staticClass:"mb-4 mr-4",attrs:{elevation:"2",color:"primary",depressed:""},on:{click:t.addObjAliase}},[t._v("添加")])],1)],1):t._e(),t.operations[6].on?s("v-card",[s("v-row",{staticClass:"justify-center"},[s("v-col",{attrs:{cols:"6"}},[s("v-text-field",{ref:"del_object_primary",attrs:{label:"删除对象主名",dense:"",outlined:""},model:{value:t.del_object_primary,callback:function(e){t.del_object_primary=e},expression:"del_object_primary"}})],1)],1)],1):t._e()],1),s("v-card-actions",{staticClass:"justify-end"},[t._l(t.operations,(function(e,a){return[e.on?s("v-btn",{key:a,staticClass:"mb-4 mr-4",attrs:{elevation:"2",color:"primary",depressed:""},on:{click:e.commit}},[t._v("提交"+t._s(e.name)+" ")]):t._e()]})),s("v-btn",{staticClass:"mb-4 mr-4",attrs:{elevation:"2",color:"primary",depressed:""},on:{click:t.closeDialog}},[t._v("取消")])],2)],1)],1)],2)},js=[],Vs=(s("b0c0"),{name:"Suggestions",data:function(){return{suggestions:[],files:null,app:this.$root.$children[0],currPage:1,pageSize:5,comment:"",suggestion:{},suggestionID:0,isDialogOn:!1,isOperated:!1,operations:[{name:"添加三元组",on:!1,color:"primary",commit:this.commit_spo_add},{name:"删除三元组",on:!1,color:"error",commit:this.commit_spo_del},{name:"替换主名",on:!1,color:"primary",commit:this.commit_replace_primary},{name:"添加别名",on:!1,color:"warning",commit:this.commit_add_aliases},{name:"删除别名",on:!1,color:"error",commit:this.commit_del_aliases},{name:"增加实体类",on:!1,color:"primary",commit:this.commit_add_primary_aliases},{name:"删除实体类",on:!1,color:"error",commit:this.commit_del_primary_aliases}],add_spo_subject:"",add_spo_predicate:"",add_spo_object:"",add_spo_value:[],del_spo_subject:"",del_spo_predicate:"",del_spo_object:"",del_spo_value:[],old_primary:"",new_primary:"",add_aliases_primary:"",add_aliases_aliase:"",add_aliases_arr:[],del_aliases_primary:"",del_aliases_aliase:"",del_aliases_arr:[],add_object_primary:"",add_object_aliase:"",add_object_aliases:[],del_object_primary:""}},mounted:function(){},methods:{nextPage:function(){this.currPage++,this.querySuggestions()},prevPage:function(){1!==this.currPage?(this.currPage--,this.querySuggestions()):this.app.message("已经到头了哦","blue")},submitFiles:function(){var t=this,e=new FormData;if(this.files){var s,a=Object(et["a"])(this.files);try{for(a.s();!(s=a.n()).done;){var n=s.value;e.append("files",n,n.name)}}catch(i){a.e(i)}finally{a.f()}this.$axios.post("/adminServer/admin/upload",e).then((function(e){200===e.data.code?t.app.message("数据导入成功","success"):t.app.message("数据导入失败，请注意文件格式","warning"),console.log(e)})).catch((function(t){console.log(t)}))}else this.app.message("请选择相关文件","warning")},chooseOperation:function(t){for(var e=0;e<this.operations.length;e++)this.$set(this.operations[e],"on",!1);this.$set(this.operations[t],"on",!0)},addAddSPO:function(){if(""!==this.add_spo_object&&""!==this.add_spo_subject&&""!==this.add_spo_predicate){var t={subject:this.add_spo_subject,predicate:this.add_spo_predicate,object:this.add_spo_object};this.add_spo_value.push(t),this.add_spo_object="",this.add_spo_subject="",this.add_spo_predicate=""}},deleteAddSPO:function(t){this.add_spo_value.splice(t,1)},commit_spo_add:function(){var t=this;if(""!==this.comment)if(0!==this.add_spo_value.length){var e={col_names:["entity","relation","spo"],operation:"add_spo"};e.value=this.add_spo_value;var s=[];s.push(e);var a="/adminServer/admin/commit";this.$axios.post(a,{commands:s,comment:this.comment,suggester_id:this.suggestion.suggester_id+""}).then((function(e){200===e.data.code?t.app.message("修改成功","success"):t.app.message("修改失败","error")})).catch((function(){t.app.message("服务器在忙","red")}))}else this.app.message("未添加三元组","warning");else this.app.message("评论不能为空","warning")},openDialog:function(t,e){this.suggestion=t,this.isDialogOn=!0},closeDialog:function(){this.isDialogOn=!1,this.comment="",this.add_spo_subject="",this.add_spo_predicate="",this.add_spo_object="",this.add_spo_value=[],this.del_spo_subject="",this.del_spo_predicate="",this.del_spo_object="",this.del_spo_value=[],this.old_primary="",this.new_primary="",this.add_aliases_primary="",this.add_aliases_aliase="",this.add_aliases_arr=[],this.del_aliases_primary="",this.del_aliases_aliase="",this.del_aliases_arr=[],this.add_object_primary="",this.add_object_aliase="",this.add_object_aliases=[],this.del_object_primary=""},addDelSPO:function(){if(""!==this.del_spo_object&&""!==this.del_spo_subject&&""!==this.del_spo_predicate){var t={subject:this.del_spo_subject,predicate:this.del_spo_predicate,object:this.del_spo_object};this.del_spo_value.push(t),this.del_spo_object="",this.del_spo_subject="",this.del_spo_predicate=""}},deleteDelSPO:function(t){this.del_spo_value.splice(t,1)},commit_spo_del:function(){var t=this;if(""!==this.comment)if(0!==this.del_spo_value.length){var e={col_names:["entity","relation","spo"],operation:"del_spo"};e.value=this.del_spo_value;var s=[];s.push(e);var a="/adminServer/admin/commit";this.$axios.post(a,{commands:s,comment:this.comment,suggester_id:this.suggestion.suggester_id+""}).then((function(e){200===e.data.code?t.app.message("修改成功","success"):t.app.message("修改失败","warning")})).catch((function(){t.app.message("服务器在忙","red")}))}else this.app.message("未添加三元组","warning");else this.app.message("评论不能为空","warning")},commit_replace_primary:function(){var t=this;if(""!==this.comment)if(""!==this.old_primary&&""!==this.new_primary){var e=[],s={col_names:["entity"],operation:"replace_primary"};s.value={old:this.old_primary,new:this.new_primary},e.push(s);var a="/adminServer/admin/commit";this.$axios.post(a,{commands:e,comment:this.comment,suggester_id:this.suggestion.suggester_id+""}).then((function(e){200===e.data.code?t.app.message("修改成功","success"):t.app.message("修改失败","warning")})).catch((function(){t.app.message("服务器在忙","red")}))}else this.app.message("主名未全部填写","warning");else this.app.message("评论不能为空","warning")},deleteAddAliase:function(t){this.add_aliases_arr.splice(t,1)},addAddAliase:function(){""!==this.add_aliases_aliase&&(this.add_aliases_arr.push(this.add_aliases_aliase),this.add_aliases_aliase="")},commit_add_aliases:function(){var t=this;if(""!==this.comment)if(""!==this.add_aliases_primary&&0!==this.add_aliases_arr.length){var e=[],s={col_names:["entity"],operation:"add_aliases"};s.value={primary:this.add_aliases_primary,aliases:this.add_aliases_arr},e.push(s);var a="/adminServer/admin/commit";this.$axios.post(a,{commands:e,comment:this.comment,suggester_id:this.suggestion.suggester_id+""}).then((function(e){200===e.data.code?t.app.message("修改成功","success"):t.app.message("修改失败","warning")})).catch((function(){t.app.message("服务器在忙","red")}))}else this.app.message("主名或别名未填写","warning");else this.app.message("评论不能为空","warning")},deleteDelAliase:function(t){this.del_aliases_arr.splice(t,1)},addDelAliase:function(){""!==this.del_aliases_aliase&&(this.del_aliases_arr.push(this.del_aliases_aliase),this.del_aliases_aliase="")},commit_del_aliases:function(){var t=this;if(""!==this.comment)if(""!==this.del_aliases_primary&&0!==this.del_aliases_arr.length){var e=[],s={col_names:["entity"],operation:"del_aliases"};s.value={primary:this.del_aliases_primary,aliases:this.del_aliases_arr},e.push(s);var a="/adminServer/admin/commit";this.$axios.post(a,{commands:e,comment:this.comment,suggester_id:this.suggestion.suggester_id+""}).then((function(e){200===e.data.code?t.app.message("修改成功","success"):t.app.message("修改失败","warning")})).catch((function(){t.app.message("服务器在忙","red")}))}else this.app.message("主名或别名未填写","warning");else this.app.message("评论不能为空","warning")},deleteObjAliase:function(t){this.add_object_aliases.splice(t,1)},addObjAliase:function(){""!==this.add_object_aliase&&(this.add_object_aliases.push(this.add_object_aliase),this.add_object_aliase="")},commit_add_primary_aliases:function(){var t=this;if(""!==this.comment)if(""!==this.add_object_primary&&0!==this.add_object_aliases.length){var e=[],s={col_names:["entity"],operation:"add_primary_aliases"};s.value={primary:this.add_object_primary,aliases:this.add_object_aliases},e.push(s);var a="/adminServer/admin/commit";this.$axios.post(a,{commands:e,comment:this.comment,suggester_id:this.suggestion.suggester_id+""}).then((function(e){200===e.data.code?t.app.message("修改成功","success"):t.app.message("修改失败","warning")})).catch((function(){t.app.message("服务器在忙","red")}))}else this.app.message("主名或别名未填写","warning");else this.app.message("评论不能为空","warning")},commit_del_primary_aliases:function(){var t=this;if(""!==this.comment)if(""!==this.del_object_primary){var e=[],s={col_names:["entity"],operation:"del_primary_aliases"};s.value=this.del_object_primary,e.push(s);var a="/adminServer/admin/commit";this.$axios.post(a,{commands:e,comment:this.comment,suggester_id:this.suggestion.suggester_id+""}).then((function(e){200===e.data.code?t.app.message("修改成功","success"):t.app.message("修改失败","warning")})).catch((function(){t.app.message("服务器在忙","red")}))}else this.app.message("主名未填写","warning");else this.app.message("评论不能为空","warning")},getTime:function(t){t=new Date(t);var e="";return e+=t.getFullYear()+"-",e+=this.timeComplement(t.getMonth()+1,2)+"-",e+=this.timeComplement(t.getDate(),2)+" ",e+=this.timeComplement(t.getHours(),2)+":",e+=this.timeComplement(t.getMinutes(),2)+":",e+=this.timeComplement(t.getSeconds(),2),e},querySuggestions:function(){var t=Object(G["a"])(regeneratorRuntime.mark((function t(){var e,s=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return parseInt(this.pageNum),parseInt(this.pageSize),e="/adminServer/admin/suggestions",this.app.overlay=!0,t.next=6,this.$axios.get(e,{params:{pageNum:this.currPage,pageSize:this.pageSize}}).then((function(t){if(200===t.data.code)if(null!=t.data.data&&0!==t.data.data.length){var e,a=Object(et["a"])(t.data.data);try{for(a.s();!(e=a.n()).done;){var n=e.value,i={};i.content=n.content,i.updated_at=n.updated_at,i.created_at=n.created_at,i.suggester_id=n.user_id,s.suggestions.push(i)}}catch(c){a.e(c)}finally{a.f()}for(var o=function(t){var e="/userServer/users/"+s.suggestions[t].suggester_id;s.$axios.get(e,{}).then((function(e){200===e.data.code?s.$set(s.suggestions[t],"suggester_name",e.data.data.nickname):s.$set(s.suggestions[t],"suggester_name","未知")})).catch((function(t){console.log(t)}))},r=0;r<s.suggestions.length;r++)o(r)}else 200!==t.data.code||null!=t.data.data&&0!==t.data.data.length||(1!==s.currPage&&s.currPage--,s.app.message("意见到底了","warning"));s.app.overlay=!1})).catch((function(){s.app.message("服务器在忙","red")}));case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}}),qs=Vs,Is=s("23a7"),Ts=Object(p["a"])(qs,$s,js,!1,null,"1c34a79c",null),Ps=Ts.exports;h()(Ts,{VBtn:q["a"],VCard:E["a"],VCardActions:F["a"],VCardText:F["c"],VChip:Ue["a"],VCol:Ot["a"],VContainer:_t["a"],VDialog:bt["a"],VFileInput:Is["a"],VIcon:I["a"],VRow:Lt["a"],VSpacer:P["a"],VTextField:yt["a"],VTextarea:wt["a"],VToolbar:kt["a"],VTooltip:Qt["a"]});var Os={name:"SuggestionsView",components:{Suggestions:Ps},data:function(){return{app:this.$root.$children[0]}},methods:{},mounted:function(){this.$refs.Suggestions.querySuggestions()}},Ms=Os,Ls=Object(p["a"])(Ms,Ss,Ds,!1,null,"ba9b9a8a",null),Hs=Ls.exports;a["default"].use(x["a"]);var Qs=[{path:"/",name:"Home",component:Vt},{path:"/login",name:"Login",component:Et},{path:"/error/:id",name:"Error",component:Ce},{path:"*",name:"NotFound",component:Ce},{path:"/register",name:"Register",component:Xt},{path:"/userHome",name:"UserHome",component:fe,meta:{requireAuth:!0},children:[{path:"",name:"UserHomeWelcome",component:Ve},{path:"hotQuestions",name:"HotQuestions",component:ms},{path:"followingQuestions",name:"FollowingQuestions",component:rs},{path:"searchedQuestions/:search",name:"SearchedQuestions",component:bs,props:!0},{path:"questionDetails/:questionID",name:"QuestionDetails",component:As,props:!0},{path:"suggestionsView",name:"SuggestionsView",component:Hs},{path:"userInfo",name:"userInfo",component:Me}]}],Rs=new x["a"]({base:"/",routes:Qs});Rs.beforeEach((function(t,e,s){t.matched.some((function(t){return t.meta.requireAuth}))?k.state.token?s():s({path:"/login",query:{redirect:t.fullPath}}):s()}));var Es=Rs,Fs=s("f309");a["default"].use(Fs["a"]);var Ns=new Fs["a"]({theme:{dark:k.state.themeIsDark}});s("d5e8"),s("5363");a["default"].config.productionTip=!1,new a["default"]({router:Es,store:k,vuetify:Ns,render:function(t){return t(y)}}).$mount("#app")},"5b9c":function(t,e,s){"use strict";s("4166")},"5ced":function(t,e,s){},"685a":function(t,e,s){},"846d":function(t,e,s){"use strict";s("313c")},8866:function(t,e,s){},"9911a":function(t,e,s){"use strict";s("685a")},a634:function(t,e,s){},bb76:function(t,e,s){"use strict";s("8866")},c094:function(t,e,s){},cccb:function(t,e,s){"use strict";s("5ced")},cf05:function(t,e,s){t.exports=s.p+"img/logo.4bb0dbda.png"},fb89:function(t,e,s){"use strict";s("0140")}});
//# sourceMappingURL=app.9f038f30.js.map